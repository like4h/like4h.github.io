<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>渗透测试流程-资源汇总版 | like4h</title><meta name="keywords" content="教程,渗透流程"><meta name="author" content="like4h"><meta name="copyright" content="like4h"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="简介： 这是一个新手小白、学习一个月后的稍稍总结，主要重于各种姿势的总结！本文会一直更新的、主要是参考红队的攻击流程！  00x1-信息收集  对外  基础信息收集  网站信息、防护信息 这一篇已经写的非常详细了、没必要复制粘贴大佬的了 Tidesec团队、web渗透信息搜集 freebuf、全流程信息搜集方法总结 Freebuf、渗透信息搜集心得 nul1、渗透前的目标信息搜集小结 如果上面的">
<meta property="og:type" content="article">
<meta property="og:title" content="渗透测试流程-资源汇总版">
<meta property="og:url" content="http://example.com/2022/03/08/2984999730.html">
<meta property="og:site_name" content="like4h">
<meta property="og:description" content="简介： 这是一个新手小白、学习一个月后的稍稍总结，主要重于各种姿势的总结！本文会一直更新的、主要是参考红队的攻击流程！  00x1-信息收集  对外  基础信息收集  网站信息、防护信息 这一篇已经写的非常详细了、没必要复制粘贴大佬的了 Tidesec团队、web渗透信息搜集 freebuf、全流程信息搜集方法总结 Freebuf、渗透信息搜集心得 nul1、渗透前的目标信息搜集小结 如果上面的">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2022/04/08/3sgAHoqV2mdCzU1.png">
<meta property="article:published_time" content="2022-03-08T14:37:03.000Z">
<meta property="article:modified_time" content="2022-03-29T14:16:48.781Z">
<meta property="article:author" content="like4h">
<meta property="article:tag" content="教程">
<meta property="article:tag" content="渗透流程">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/04/08/3sgAHoqV2mdCzU1.png"><link rel="shortcut icon" href="/img/index/avater.jpg"><link rel="canonical" href="http://example.com/2022/03/08/2984999730"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="baidu-site-verification" content="6e49742deeebc779b29d507edd20bad8"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?8903f8597aac32d70805a4aae2c824e1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '渗透测试流程-资源汇总版',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-03-29 22:16:48'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.0.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/index/avater.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">37</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">29</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About Me</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://s2.loli.net/2022/04/08/3sgAHoqV2mdCzU1.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">like4h</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About Me</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">渗透测试流程-资源汇总版</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-08T14:37:03.000Z" title="发表于 2022-03-08 22:37:03">2022-03-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-03-29T14:16:48.781Z" title="更新于 2022-03-29 22:16:48">2022-03-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%BA%A2%E9%98%9F/">红队</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">7.8k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>26分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="渗透测试流程-资源汇总版"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介：</h1>
<p>这是一个新手小白、学习一个月后的稍稍总结，主要重于各种姿势的总结！本文会一直更新的、主要是参考红队的攻击流程！</p>
<h2 id="00x1-信息收集"><a class="markdownIt-Anchor" href="#00x1-信息收集"></a> 00x1-信息收集</h2>
<h3 id="对外"><a class="markdownIt-Anchor" href="#对外"></a> 对外</h3>
<h3 id="基础信息收集"><a class="markdownIt-Anchor" href="#基础信息收集"></a> 基础信息收集</h3>
<h4 id="网站信息-防护信息"><a class="markdownIt-Anchor" href="#网站信息-防护信息"></a> 网站信息、防护信息</h4>
<p>这一篇已经写的非常详细了、没必要复制粘贴大佬的了</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/XvcYaVMBkWiH2BW7kCWfNQ">Tidesec团队、web渗透信息搜集</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/database/195169.html">freebuf、全流程信息搜集方法总结</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/204883.html">Freebuf、渗透信息搜集心得</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/nul1/p/11311731.html">nul1、渗透前的目标信息搜集小结</a></p>
<p>如果上面的链接失效了可以直接下载、准备好的pdf版的</p>
<p><a target="_blank" rel="noopener" href="https://jokerjq.lanzouw.com/i64Fq01590pg">蓝奏云</a></p>
<h4 id="网站组件信息"><a class="markdownIt-Anchor" href="#网站组件信息"></a> 网站组件信息</h4>
<p>使用google插件</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wappalyzer</span><br><span class="line">shodan</span><br></pre></td></tr></table></figure>
<h5 id="效果"><a class="markdownIt-Anchor" href="#效果"></a> 效果：</h5>
<p><img src="https://s2.loli.net/2022/03/29/o1UsxcihPYvwJdn.png" alt="image-20220307211438834" /></p>
<p><img src="https://s2.loli.net/2022/03/29/muM7pqO5VX9fivW.png" alt="image-20220307211516363" /></p>
<h4 id="cdn绕过"><a class="markdownIt-Anchor" href="#cdn绕过"></a> cdn绕过</h4>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">网站识别：<span class="number">17</span>ce.com</span><br><span class="line">子域名入手判断：可能只加速了主站</span><br><span class="line">黑暗引擎</span><br><span class="line">证书信息查询</span><br><span class="line">zmap大法</span><br><span class="line">phpinfo等页面泄露IP</span><br><span class="line">ssrf记录  a服务器开启日志 b发生ssrf请求a 被记录真实IP</span><br><span class="line">国外地址访问</span><br><span class="line">备案查询等等</span><br><span class="line">超级Ping：https://www.<span class="number">17</span>ce.com/</span><br><span class="line">接口查询：https://<span class="built_in">get-site</span><span class="literal">-ip</span>.com/</span><br><span class="line">国外请求：https://tools.ipip.net/cdn.php</span><br><span class="line">全网扫描：https://github.com/Tai7sy/fuckcdn</span><br></pre></td></tr></table></figure>
<h4 id="源码获取"><a class="markdownIt-Anchor" href="#源码获取"></a> 源码获取</h4>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">CMS识别: 尝试获取源码（开源，售卖，自研，未公开）</span><br><span class="line">备份文件泄露，敏感文件css等可能存在特征: 使用子域名扫描可能存在特殊的备份文件被开发者将源码打包</span><br><span class="line">资产监控: github，gitee</span><br><span class="line">git信息泄露: 访问 xxx/.git 文件 <span class="number">403</span>或存在即可尝试获取源码 工具：githack.py(后台获取)</span><br><span class="line">svn信息泄露: 访问xxx/.svn/entries  内容存在即可尝试获取源码 工具：svnhack.py(后台获取)</span><br><span class="line">DS_Store泄露: 该文件为mac下的数据文件，访问存在即可尝试获取源码 工具：ds_dore.py(后台获取)</span><br><span class="line">php特性配置说明文件composer.json泄露: 访问composer.json存在即可尝试获取源码相关信息</span><br><span class="line">web<span class="literal">-inf</span>/web.xml泄露 其他的cvs，bzr泄露等现在很少遇见，以上总结的是比较实用的几种</span><br><span class="line">github语法查询源码 查询相关的敏感信息可能获取到信息</span><br><span class="line">菠菜涉黄等源码获取 huzhan.com/github泄露，github语法查询，黑暗引擎关键字查询</span><br></pre></td></tr></table></figure>
<h3 id="对内"><a class="markdownIt-Anchor" href="#对内"></a> 对内</h3>
<h4 id="端口信息"><a class="markdownIt-Anchor" href="#端口信息"></a> 端口信息</h4>
<h5 id="masscan"><a class="markdownIt-Anchor" href="#masscan"></a> masscan</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">masscan -p 1-65535 192.168.1.136 --rate=1000</span><br><span class="line"></span><br><span class="line">扫描开放的端口</span><br><span class="line"></span><br><span class="line">教程：</span><br><span class="line">https://blog.bbskali.cn/2443.html</span><br></pre></td></tr></table></figure>
<h5 id="nmap"><a class="markdownIt-Anchor" href="#nmap"></a> nmap</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">nmap -p 22,80,888,8888,3306,21,135,445 -sS -sC -v -A  43.129.65.43 -oA 310      <span class="comment">#对固定的端口进行扫描</span></span><br><span class="line"></span><br><span class="line">nmap -T4 -sC -sV 192.168.1.130</span><br><span class="line"></span><br><span class="line">教程：</span><br><span class="line">https://blog.csdn.net/smli_ng/article/details/105964486</span><br><span class="line">https://blog.csdn.net/Kris__zhang/article/details/106841466</span><br></pre></td></tr></table></figure>
<h4 id="cms识别"><a class="markdownIt-Anchor" href="#cms识别"></a> cms识别</h4>
<h5 id="whatweb"><a class="markdownIt-Anchor" href="#whatweb"></a> whatweb</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">whatweb www.xx.com</span><br><span class="line"></span><br><span class="line">教程：</span><br><span class="line">https://www.freebuf.com/sectool/252986.html</span><br></pre></td></tr></table></figure>
<p>二开版本（只是windows、增加网站信息）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://jokerjq.lanzouw.com/iA2al015avle</span><br></pre></td></tr></table></figure>
<h4 id="目录扫描"><a class="markdownIt-Anchor" href="#目录扫描"></a> 目录扫描</h4>
<h5 id="disearch"><a class="markdownIt-Anchor" href="#disearch"></a> disearch</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">python3 dirsearch.py  -u <span class="string">&quot;www.xx.com&quot;</span> -e -t       <span class="comment">#-t参数是为了确保扫描速度</span></span><br><span class="line"></span><br><span class="line">教程：</span><br><span class="line">https://blog.csdn.net/qq_43936524/article/details/115271837?spm=1001.2014.3001.5502</span><br></pre></td></tr></table></figure>
<h5 id="gobuster"><a class="markdownIt-Anchor" href="#gobuster"></a> gobuster</h5>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gobuster <span class="built_in">dir</span> -u http://www.xxx.com -w 字典路径 -t 50</span><br><span class="line"></span><br><span class="line">教程：</span><br><span class="line">https://blog.csdn.net/nzjdsds/article/details/86756828</span><br></pre></td></tr></table></figure>
<h5 id="dirmap"><a class="markdownIt-Anchor" href="#dirmap"></a> dirmap</h5>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">python3 dirmap.py -i http://www.webhack123.com -lcf</span><br><span class="line">项目</span><br><span class="line">https://github.com/H4ckForJob/dirmap</span><br><span class="line"></span><br><span class="line">教程：</span><br><span class="line">https://blog.csdn.net/zsw15841822890/article/details/107555288</span><br></pre></td></tr></table></figure>
<p>类似的还是有很多</p>
<p>打包</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://jokerjq.lanzouw.com/iIAqI015bo1i</span><br><span class="line">密码:5jtz</span><br></pre></td></tr></table></figure>
<h2 id="00x2-外网打点"><a class="markdownIt-Anchor" href="#00x2-外网打点"></a> 00x2-外网打点</h2>
<p>单纯的外网还是要靠自己的src挖掘能力和漏洞挖掘、代码审计的能力了</p>
<h3 id="00x1-黑盒测试"><a class="markdownIt-Anchor" href="#00x1-黑盒测试"></a> 00x1-黑盒测试</h3>
<h4 id="基本流程学习"><a class="markdownIt-Anchor" href="#基本流程学习"></a> 基本流程学习：</h4>
<p><img src="https://s2.loli.net/2022/03/29/JxYjICVl7hZOQST.png" alt="黑盒测试" /></p>
<h3 id="00x2-白盒测试"><a class="markdownIt-Anchor" href="#00x2-白盒测试"></a> 00x2-白盒测试</h3>
<h4 id="学习链接"><a class="markdownIt-Anchor" href="#学习链接"></a> 学习链接：</h4>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://jokerjq.lanzouw.com/iHmiY015fbbe</span><br><span class="line">密码:ex0j</span><br></pre></td></tr></table></figure>
<h3 id="0x3-黑白盒测试"><a class="markdownIt-Anchor" href="#0x3-黑白盒测试"></a> 0x3-黑白盒测试</h3>
<p>黑白盒测试就是、前端进行漏洞点的查找、然后后买你在漏洞点上进行代码审计、查看相关代码、跟着进行动态的调试</p>
<h3 id="00x4-针对网站cms"><a class="markdownIt-Anchor" href="#00x4-针对网站cms"></a> 00x4-针对网站cms</h3>
<p>针对网站的cms、进行现有漏洞的审查、还可以针对现有的漏洞点、进行在挖掘</p>
<h4 id="扫描工具"><a class="markdownIt-Anchor" href="#扫描工具"></a> 扫描工具：</h4>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Lucifer1993/AngelSword</span><br><span class="line">https://github.com/SecWiki/CMS-Hunter</span><br></pre></td></tr></table></figure>
<h3 id="00x4-中间件漏洞"><a class="markdownIt-Anchor" href="#00x4-中间件漏洞"></a> 00x4-中间件漏洞</h3>
<p>针对不同的中间件、管理员没有做修复的话是可以利用的</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/JGQjSHrSNtO5AHVAUeswyg">常见的网站中间件渗透思路总结</a></p>
<h4 id="struts2漏洞"><a class="markdownIt-Anchor" href="#struts2漏洞"></a> Struts2漏洞</h4>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Struts2<span class="literal">-005</span></span><br><span class="line">Struts2<span class="literal">-008</span></span><br><span class="line">Struts2<span class="literal">-009</span></span><br><span class="line">Struts2<span class="literal">-013</span></span><br><span class="line">Struts2<span class="literal">-016</span>( 很多老系统都补了这个懂、但是利用率还是挺高的)</span><br><span class="line">Struts2<span class="literal">-019</span></span><br><span class="line">Struts2<span class="literal">-020</span></span><br><span class="line">Struts2<span class="literal">-devmode</span></span><br><span class="line">Struts2<span class="literal">-032</span></span><br><span class="line">Struts2<span class="literal">-033</span></span><br><span class="line">Struts2<span class="literal">-037</span></span><br><span class="line">Struts2<span class="literal">-045</span></span><br><span class="line">Struts2<span class="literal">-046</span></span><br><span class="line">Struts2<span class="literal">-048</span></span><br><span class="line">Struts2<span class="literal">-052</span></span><br><span class="line">Struts2<span class="literal">-053</span></span><br><span class="line">Struts2<span class="literal">-057</span></span><br></pre></td></tr></table></figure>
<h4 id="weblogicl漏洞"><a class="markdownIt-Anchor" href="#weblogicl漏洞"></a> weblogicl漏洞</h4>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CVE<span class="literal">-2019-2725</span></span><br><span class="line">CVE<span class="literal">-2019-2729</span></span><br><span class="line">CVE<span class="literal">-2018-3191</span></span><br><span class="line">CVE<span class="literal">-2018-2628</span></span><br><span class="line">CVE<span class="literal">-2018-2893</span></span><br><span class="line">CVE<span class="literal">-2018-2894</span></span><br><span class="line">CVE<span class="literal">-2017-3506</span></span><br><span class="line">CVE<span class="literal">-2017-10271</span></span><br><span class="line">CVE<span class="literal">-2017-3248</span></span><br><span class="line">CVE<span class="literal">-2016-0638</span></span><br><span class="line">CVE<span class="literal">-2016-3510</span></span><br><span class="line">CVE<span class="literal">-2015-4852</span></span><br><span class="line">CVE<span class="literal">-2014-4210</span></span><br></pre></td></tr></table></figure>
<p>SSRF<br />
控制台弱口令、直接webshell</p>
<h4 id="jboss漏洞"><a class="markdownIt-Anchor" href="#jboss漏洞"></a> Jboss漏洞</h4>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CVE<span class="literal">-2015-7501</span></span><br><span class="line">CVE<span class="literal">-2017-7504</span></span><br><span class="line">CVE<span class="literal">-2017-12149</span></span><br><span class="line">未授权访问、部署webshell</span><br><span class="line">控制台弱口令、部署webshell</span><br></pre></td></tr></table></figure>
<p>wildfly [ jboss 7.x 改名为wildfly ]</p>
<p>控制台弱口令部署、webshell</p>
<h4 id="tomcat漏洞"><a class="markdownIt-Anchor" href="#tomcat漏洞"></a> Tomcat漏洞</h4>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CVE<span class="literal">-2016-8735</span></span><br><span class="line"></span><br><span class="line">CVE<span class="literal">-2017-12615</span> [<span class="type">readonly</span> 实际设为 <span class="type">true</span>的情况较少、使用的时候比较鸡肋 <span class="type">J</span></span><br><span class="line"><span class="type">CVE</span>-<span class="number">2020</span>-<span class="number">1938</span> （<span class="type">AJP</span>协议漏洞，直接把<span class="number">8009</span>端口暴漏在外网的不太多、使用的时候也是比较鸡肋的）</span><br><span class="line"></span><br><span class="line">控制台弱口令、部署<span class="type">webshell</span>  （<span class="number">7</span><span class="type">.x</span>版本后、默认加了防爆破机制）</span><br></pre></td></tr></table></figure>
<h4 id="jekins漏洞"><a class="markdownIt-Anchor" href="#jekins漏洞"></a> Jekins漏洞</h4>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CVE<span class="literal">-2018-1999002</span> [任意文件读取]</span><br><span class="line"></span><br><span class="line">未授权访问、任意命令执行</span><br><span class="line"></span><br><span class="line">控制台弱口令、任意命令执行</span><br></pre></td></tr></table></figure>
<h4 id="elasticsearch漏洞"><a class="markdownIt-Anchor" href="#elasticsearch漏洞"></a> ElasticSearch漏洞</h4>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CVE<span class="literal">-2014-3120</span> [专门针对老版本（无沙盒）<span class="type">RCE</span>]</span><br><span class="line">CVE<span class="literal">-2015-1427</span> [<span class="type">Groovy</span> <span class="type">RCE</span>]</span><br><span class="line">CVE<span class="literal">-2015-3337</span> [任意文件读取]</span><br><span class="line"></span><br><span class="line">未授权访问、敏感信息泄露</span><br></pre></td></tr></table></figure>
<h4 id="rabbitmq漏洞"><a class="markdownIt-Anchor" href="#rabbitmq漏洞"></a> RabbitMQ漏洞</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">任意文件读取 （低版本）</span><br><span class="line"></span><br><span class="line">控制台弱口令、部署webshell</span><br></pre></td></tr></table></figure>
<h4 id="ibm-websphere漏洞"><a class="markdownIt-Anchor" href="#ibm-websphere漏洞"></a> IBM Websphere漏洞</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Java 反序列化</span><br><span class="line">控制台弱口令、部署webshell</span><br></pre></td></tr></table></figure>
<h4 id="axis2漏洞"><a class="markdownIt-Anchor" href="#axis2漏洞"></a> Axis2漏洞</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">任意文件读取</span><br><span class="line"></span><br><span class="line">目录遍历</span><br></pre></td></tr></table></figure>
<h4 id="apache-activemq漏洞"><a class="markdownIt-Anchor" href="#apache-activemq漏洞"></a> Apache ActiveMQ漏洞</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">未授权访问，5.12之前的版本 fileserver存在 PUT任意写</span><br><span class="line">CVE-2015-5254</span><br></pre></td></tr></table></figure>
<h4 id="apache-solr漏洞"><a class="markdownIt-Anchor" href="#apache-solr漏洞"></a> Apache Solr漏洞</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CVE-2017-12629</span><br><span class="line"></span><br><span class="line">CVE-2019-0193 [ Apache Solr 5.x - 8.2.0 ]</span><br></pre></td></tr></table></figure>
<h4 id="apache-zookeeper漏洞"><a class="markdownIt-Anchor" href="#apache-zookeeper漏洞"></a> Apache Zookeeper漏洞</h4>
<p>未授权访问，敏感信息泄露</p>
<h3 id="00x5-针对各类开源程序的已知nday漏洞"><a class="markdownIt-Anchor" href="#00x5-针对各类开源程序的已知nday漏洞"></a> 00x5-针对各类开源程序的已知Nday漏洞</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Dedecms           后台弱口令，系列已知Nday漏洞利用</span><br><span class="line">thinkphp 5.x      后台弱口令，系列已知Nday漏洞利用</span><br><span class="line">phpcms            后台弱口令，系列已知Nday漏洞利用</span><br><span class="line">ecshop            后台弱口令，系列已知Nday漏洞利用</span><br><span class="line">Metinfo           后台弱口令，系列已知Nday漏洞利用</span><br><span class="line">discuz            后台弱口令，系列已知Nday漏洞利用</span><br><span class="line">帝国cms            后台弱口令，系列已知Nday漏洞利用</span><br><span class="line">phpmyadmin        数据库弱口令，系列已知Nday漏洞利用</span><br><span class="line">wordpress         后台弱口令，系列已知Nday漏洞利用</span><br><span class="line">joomla            后台弱口令，系列已知Nday漏洞利用</span><br><span class="line">drupal            CVE-2018-7600，后台弱口令，系列已知Nday漏洞利用</span><br></pre></td></tr></table></figure>
<h4 id="利用工具"><a class="markdownIt-Anchor" href="#利用工具"></a> 利用工具</h4>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/dwflare/Middleware-Vulnerability-detection</span><br></pre></td></tr></table></figure>
<h3 id="00x5-拿shell可能遇到的问题"><a class="markdownIt-Anchor" href="#00x5-拿shell可能遇到的问题"></a> 00x5-拿shell可能遇到的问题</h3>
<h4 id="免杀马的准备"><a class="markdownIt-Anchor" href="#免杀马的准备"></a> 免杀马的准备：</h4>
<h5 id="过d盾"><a class="markdownIt-Anchor" href="#过d盾"></a> 过d盾</h5>
<h5 id="过安全狗"><a class="markdownIt-Anchor" href="#过安全狗"></a> 过安全狗</h5>
<h5 id="过waf"><a class="markdownIt-Anchor" href="#过waf"></a> 过WAF</h5>
<h5 id="小马换大马"><a class="markdownIt-Anchor" href="#小马换大马"></a> 小马换大马</h5>
<h5 id="大马做免杀"><a class="markdownIt-Anchor" href="#大马做免杀"></a> 大马做免杀</h5>
<h5 id="工具集合"><a class="markdownIt-Anchor" href="#工具集合"></a> 工具集合：</h5>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">D:\攻防\武器库\Web安全\webshell\小马-不死马-图片马-冰蝎马</span><br><span class="line">https://jokerjq.lanzouw.com/ipMzn015zxqb</span><br><span class="line">密码:bdq0</span><br><span class="line">解压密码：like4h!@#</span><br></pre></td></tr></table></figure>
<h4 id="连接工具的准备"><a class="markdownIt-Anchor" href="#连接工具的准备"></a> 连接工具的准备：</h4>
<h5 id="过狗刀"><a class="markdownIt-Anchor" href="#过狗刀"></a> 过狗刀</h5>
<p>暗月过狗刀</p>
<h5 id="冰蝎魔改"><a class="markdownIt-Anchor" href="#冰蝎魔改"></a> 冰蝎魔改</h5>
<p>注意冰蝎、哥斯拉、蚁剑链接时的流量特征太明显了</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">冰蝎</span><br><span class="line">https://www.freebuf.com/articles/web/263741.html</span><br><span class="line">https://github.com/Litch1-v/behinder-clone</span><br><span class="line">https://m.freebuf.com/sectool/247009.html</span><br><span class="line">https://www.cnblogs.com/lcxblogs/p/14291874.html</span><br><span class="line">蚁剑</span><br><span class="line">https://www.cnblogs.com/Lmg66/p/14016869.html</span><br><span class="line">https://blog.csdn.net/weixin_46684578/article/details/122146249</span><br><span class="line">https://xz.aliyun.com/t/7735</span><br></pre></td></tr></table></figure>
<h4 id="绕过disbale_functions"><a class="markdownIt-Anchor" href="#绕过disbale_functions"></a> 绕过disbale_functions:</h4>
<p>每次头大的华友各种disable_functions</p>
<h5 id="学习工具及链接"><a class="markdownIt-Anchor" href="#学习工具及链接"></a> 学习工具及链接</h5>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">https://xz.aliyun.com/t/10057</span><br><span class="line">https://www.freebuf.com/articles/network/263540.html</span><br><span class="line">https://www.anquanke.com/post/id/228712</span><br><span class="line">https://cloud.tencent.com/developer/article/1785576</span><br><span class="line">https://www.cnblogs.com/sakura521/p/15055907.html</span><br><span class="line">https://www.easy233.top/2020/06/18/hello/</span><br><span class="line">工具使用：</span><br><span class="line">GitHub  </span><br><span class="line">https://github.com/yangyangwithgnu/bypass_disablefunc_via_LD_PRELOAD   #用的最多的</span><br><span class="line">https://github.com/k-ring/php-fpm-bypass-disable_functions             #配合msf上线的</span><br><span class="line">https://github.com/beched/php_disable_functions_bypass</span><br><span class="line">https://github.com/y0un9er/bypass-disable_functions                    #这个也是收集好的</span><br><span class="line">蚁剑插件、已经准备好了</span><br><span class="line">https://jokerjq.lanzouw.com/ibxcQ0160atc</span><br><span class="line">密码:3ms2</span><br><span class="line">相关学习资料、工具整理</span><br><span class="line">https://jokerjq.lanzouw.com/iWRMA0160x3e</span><br><span class="line">密码:8ccu</span><br><span class="line">解压密码：blog.like4h.top</span><br></pre></td></tr></table></figure>
<h2 id="00x3-拿到跳板机"><a class="markdownIt-Anchor" href="#00x3-拿到跳板机"></a> 00x3-拿到跳板机</h2>
<p>在上面我们能拿到shell以后、可以自己执行命令了</p>
<h3 id="跳板机信息收集"><a class="markdownIt-Anchor" href="#跳板机信息收集"></a> 跳板机信息收集</h3>
<h4 id="windows"><a class="markdownIt-Anchor" href="#windows"></a> Windows</h4>
<h5 id="相关姿势点"><a class="markdownIt-Anchor" href="#相关姿势点"></a> 相关姿势点：</h5>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">杀软信息:</span><br><span class="line">task /svc</span><br><span class="line"></span><br><span class="line">便笺信息:</span><br><span class="line"><span class="number">1</span>.win10便笺信息保存在</span><br><span class="line">C:\Users\%username%\AppData\Local\Packages\Microsoft.MicrosoftStickyNotes_8wekyb3d8bbwe\LocalState\p</span><br><span class="line">lum.sqlite ，为sqllite数据库文件，可以使用sqllitestudio打开。</span><br><span class="line"><span class="number">2</span>.win7便笺信息保存在 C:\Users\%username%\AppData\Roaming\Microsoft\Sticky Notes\StickyNotes ，为txt</span><br><span class="line">文本格式，也可以下载会本地放在相同位置来查看便笺信息。</span><br><span class="line"></span><br><span class="line">网络信息:</span><br><span class="line"><span class="comment"># 查看网络配置信息</span></span><br><span class="line">ipconfig /all</span><br><span class="line"><span class="comment"># 查看dns缓存信息</span></span><br><span class="line">ipconfig /displaydns</span><br><span class="line"><span class="comment"># 查看本地host文件</span></span><br><span class="line"><span class="built_in">type</span> c:\Windows\System32\drivers\etc\hosts</span><br><span class="line"></span><br><span class="line">网络共享:</span><br><span class="line">用户会话下使用 net use 查看用户连接的文件共享服务器，可以以域管权限登录文件服务器，查看共享的相关</span><br><span class="line">信息。</span><br><span class="line"></span><br><span class="line">代理信息:</span><br><span class="line">可以使用 reg query <span class="string">&quot;HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Internet</span></span><br><span class="line"><span class="string">Settings&quot;</span> /v ProxyServer 查看用户配置的代理信息。</span><br><span class="line"></span><br><span class="line">远程连接:</span><br><span class="line">可以使用 reg query “HKEY_CURRENT_USER\Software\Microsoft\Terminal Server Client\Servers” /s 查看</span><br><span class="line">当前用户连接过的远程桌面。</span><br><span class="line"></span><br><span class="line">个人机信息收集思路:</span><br><span class="line"><span class="number">1</span>. 明确我们分析个人机想要找到的数据类型；</span><br><span class="line"><span class="number">2</span>. 分析我们想要找到的数据可能存储的位置；</span><br><span class="line"><span class="number">3</span>. 可以通过录屏、键盘记录等记录员工的每日操作；</span><br><span class="line"></span><br><span class="line">比如我们控制了管理员的个人机，下一步为了获取更多凭证，可以尝试:</span><br><span class="line"><span class="number">1</span>. 获取系统保存的各种凭证；</span><br><span class="line"><span class="number">2</span>. 获取浏览器保存的信息；</span><br><span class="line"><span class="number">3</span>. 分析管理员使用的远程管理软件并判断其是否保存了密码凭证；</span><br><span class="line"><span class="number">4</span>. 分析管理员的文件操作行为，判断是否存在密码本文件；</span><br><span class="line"></span><br><span class="line">比如我们想获取客服人员对某个web系统的访问权限，可以尝试:</span><br><span class="line"><span class="number">1</span>. 通过浏览器浏览记录、书签等判断用户是否对该系统有管理权限；</span><br><span class="line"><span class="number">2</span>. 获取浏览器保存的密码；</span><br><span class="line"><span class="number">3</span>. 分析用户是否把密码保存在了密码本中；</span><br><span class="line"><span class="number">4</span>. 如果要登录该员工已经登录的web系统，优先考虑窃取cookie、开代理后登录；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">个人机信息收集技巧:</span><br><span class="line"><span class="number">1</span>. 对于遇到的未知软件，可以在本地搭建相同环境进行研究，制定利用方案；</span><br><span class="line"><span class="number">2</span>. 对于不确定的行为最好本地搭建环境进行测试，确保在目标计算机上操作时不会触发安全告警；</span><br><span class="line"><span class="number">3</span>. 对于下班不关机的员工，可以在其下班时间进行分析，避免出发告警或者异常行为被其发现。对于严格执行</span><br><span class="line">下班关机的员工，可以尝试在其中午休息时间、锁屏期间进行较为敏感的操作（比如登录其在登录的系</span><br><span class="line">统）；</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">参考：</span><br><span class="line">MS08067-个人机信息搜集</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/UQsyhvFIgR5BGFIc0CtPZA">乌云安全、内网渗透之windows、linux信息收集</a></p>
<h4 id="linux"><a class="markdownIt-Anchor" href="#linux"></a> linux</h4>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1744211">一文吃透Linux</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/HzKObJAtEJihXryT03VVKA">乌云安全、红队视角下Linux信息搜集</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/zAMqkHBpyUSsq1uDoVQbdQ">乌云安全、蓝队视角下的Linux信息搜集</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/bylfsj/article/details/102624433?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522164672025716780357237006%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fblog.%2522%257D&amp;request_id=164672025716780357237006&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~first_rank_ecpm_v1~rank_v31_ecpm-1-102624433.nonecase&amp;utm_term=Linux%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86&amp;spm=1018.2226.3001.4450">csdn、Linux信息搜集整理</a></p>
<h4 id="相关资料"><a class="markdownIt-Anchor" href="#相关资料"></a> 相关资料：</h4>
<p><a target="_blank" rel="noopener" href="https://jokerjq.lanzouw.com/iO6ae01651wb">蓝奏云</a></p>
<h2 id="00x4-跳板机提权"><a class="markdownIt-Anchor" href="#00x4-跳板机提权"></a> 00x4-跳板机提权</h2>
<h3 id="windows-2"><a class="markdownIt-Anchor" href="#windows-2"></a> Windows</h3>
<h4 id="查看系统信息"><a class="markdownIt-Anchor" href="#查看系统信息"></a> 查看系统信息</h4>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systeminfo</span><br></pre></td></tr></table></figure>
<p>然后得到计算机的系统信息</p>
<p><img src="https://s2.loli.net/2022/03/29/hn6iCO2ZuNjyIsD.png" alt="image-20220308161935784" /></p>
<p>到在线工具查找相关利用漏洞（Windows提权辅助工具）</p>
<p><a target="_blank" rel="noopener" href="https://i.hacking8.com/tiquan">https://i.hacking8.com/tiquan</a>     在线的（漏洞信息能够得到更新）</p>
<p><a target="_blank" rel="noopener" href="https://github.com/Ruiruigo/WinEXP">https://github.com/Ruiruigo/WinEXP</a>      自己下载到本地搜索的（漏洞信息不能即使更新）</p>
<p><a target="_blank" rel="noopener" href="https://github.com/AonCyberLabs/Windows-Exploit-Suggester">https://github.com/AonCyberLabs/Windows-Exploit-Suggester</a>        需要在目标机器上运行的、更加直接准确</p>
<p>知道了补丁情况，则可以使用对应的exp来进行提权，不过在此之前我们需要知道webshell可执行目录有哪些？<br />
我们可以使用wt.aspx或wt.asp来进行检测：</p>
<h4 id="必须检查的常用漏洞"><a class="markdownIt-Anchor" href="#必须检查的常用漏洞"></a> 必须检查的常用漏洞</h4>
<h5 id="永恒之蓝-ms17-010kb4013389"><a class="markdownIt-Anchor" href="#永恒之蓝-ms17-010kb4013389"></a> 永恒之蓝-MS17-010[KB4013389]</h5>
<p>利用：</p>
<p>使用MSF上的msf17-010的扫描探测模块、以及直接利用的模块</p>
<p><a target="_blank" rel="noopener" href="https://cjjkkk.github.io/ms17-010%E5%A4%8D%E7%8E%B0/">相关链接</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS17-010">exp</a></p>
<h5 id="ms14-068域提权kb3011780"><a class="markdownIt-Anchor" href="#ms14-068域提权kb3011780"></a> ms14-068域提权[KB3011780]</h5>
<p>利用：</p>
<p>制作白银票据、然后在升级黄金票据</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45744814/article/details/120237865">相关链接</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS14-068">exp</a></p>
<h5 id="老版本printspoofer漏洞"><a class="markdownIt-Anchor" href="#老版本printspoofer漏洞"></a> 老版本PrintSpoofer漏洞</h5>
<p>高版本的Windows-server2016、2019都好用</p>
<p><a target="_blank" rel="noopener" href="https://github.com/itm4n/PrintSpoofer">exp</a></p>
<h5 id="cve-2021-1675打印机远程代码执行漏洞"><a class="markdownIt-Anchor" href="#cve-2021-1675打印机远程代码执行漏洞"></a> CVE-2021-1675打印机远程代码执行漏洞</h5>
<p>cs直接利用</p>
<p>资料：</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Vceup70C9USoM4JwK-6Z9w">1</a></p>
<p><a target="_blank" rel="noopener" href="https://bewhale.github.io/posts/29501.html">2</a></p>
<p><a target="_blank" rel="noopener" href="https://www.djhons.com/2021/07/04/31.html">3</a></p>
<p><a target="_blank" rel="noopener" href="https://securityaffairs.co/wordpress/119502/hacking/2021-1675-rce-poc.html">exp</a></p>
<h5 id="cve-2020-1472域控提权"><a class="markdownIt-Anchor" href="#cve-2020-1472域控提权"></a> CVE-2020-1472域控提权</h5>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b4997ebed2e8">相关链接</a></p>
<h5 id="ms08-067"><a class="markdownIt-Anchor" href="#ms08-067"></a> MS08-067</h5>
<p>使用的445端口</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/s0mor/article/details/98937473">相关链接-1</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/vuls/203881.html">相关链接-2</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS08-067">exp</a></p>
<h5 id="ms14-058kb3000061"><a class="markdownIt-Anchor" href="#ms14-058kb3000061"></a> MS14-058[KB3000061]</h5>
<p><a target="_blank" rel="noopener" href="https://sher10ck.com/2019/10/18/MS14-058%E6%8F%90%E6%9D%83/">相关链接</a></p>
<p><a target="_blank" rel="noopener" href="https://gitcode.net/mirrors/SecWiki/windows-kernel-exploits/-/tree/master/MS14-058/Exploit?from_codechina=yes">exp</a></p>
<h5 id="ms15-051kb3045171"><a class="markdownIt-Anchor" href="#ms15-051kb3045171"></a> MS15-051[KB3045171]</h5>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45427650/article/details/105560288">相关链接</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/euphrat1ca/ms15-051">exp</a></p>
<h5 id="ms15-077kb3077657"><a class="markdownIt-Anchor" href="#ms15-077kb3077657"></a> MS15-077[KB3077657]</h5>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zy_strive_2012/article/details/51683664">相关链接+exp</a></p>
<h5 id="ms16-032kb3124280"><a class="markdownIt-Anchor" href="#ms16-032kb3124280"></a> MS16-032[KB3124280]</h5>
<p><a target="_blank" rel="noopener" href="https://evi1cg.me/archives/MS16-032-Windows-Privilege-Escalation.html">相关链接</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS16-032">exp</a></p>
<h5 id="ms16-075"><a class="markdownIt-Anchor" href="#ms16-075"></a> MS16-075</h5>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/cj_Allen/article/details/105489922">相关链接</a></p>
<p><a target="_blank" rel="noopener" href="https://0x00-0x00.github.io/news/2018/09/16/kraken-writeup.html">相关链接-2</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/SecWiki/windows-kernel-exploits/tree/master/MS16-075">exp</a></p>
<h5 id="cve-2019-0708"><a class="markdownIt-Anchor" href="#cve-2019-0708"></a> CVE-2019-0708</h5>
<p><a target="_blank" rel="noopener" href="https://github.com/CVE-2019-0708/CVE-2019-0708">exp</a></p>
<h5 id="cve-2019-1322cve-2019-1405"><a class="markdownIt-Anchor" href="#cve-2019-1322cve-2019-1405"></a> CVE-2019-1322&amp;CVE-2019-1405</h5>
<p><a target="_blank" rel="noopener" href="https://www.reddit.com/r/netsec/comments/dway1o/poc_for_cve20191405_and_cve20191322_privilege/">相关链接</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/apt69/COMahawk">exp</a></p>
<h5 id="cve-2019-12750-赛门铁克用得较多本地提权"><a class="markdownIt-Anchor" href="#cve-2019-12750-赛门铁克用得较多本地提权"></a> CVE-2019-12750 (赛门铁克（用得较多）本地提权)</h5>
<p><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/195216">相关链接</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/v-p-b/cve-2019-12750">exp1</a></p>
<p>[自用备份、蓝奏云](<a target="_blank" rel="noopener" href="https://jokerjq.lanzouw.com/ie4R201es7ja">https://jokerjq.lanzouw.com/ie4R201es7ja</a><br />
密码:5n4q)</p>
<h4 id="00x1-内核溢出提权"><a class="markdownIt-Anchor" href="#00x1-内核溢出提权"></a> 00x1-内核溢出提权：</h4>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/sysinternals/downloads/psexec">先知、Windows下常见的内核溢出提权</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/q20010619/article/details/121430885">OceanSec、内核溢出漏洞提权</a></p>
<h4 id="00x2-psexec提权"><a class="markdownIt-Anchor" href="#00x2-psexec提权"></a> 00x2-psexec提权：</h4>
<p>适用版本： Windows2003、Windows2008</p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1683102">相关链接</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/sysinternals/downloads/psexec">psexec下载</a></p>
<h4 id="00x3-绕过uac提权-cve-2019-1388"><a class="markdownIt-Anchor" href="#00x3-绕过uac提权-cve-2019-1388"></a> 00x3-绕过UAC提权、CVE-2019-1388</h4>
<p>适用</p>
<p>win7、8、8.1、9、10</p>
<p><a target="_blank" rel="noopener" href="https://drunkmars.top/2021/06/01/UAC%E6%8F%90%E6%9D%83/">相关链接-1</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/-mo-/p/12088056.html">相关链接-2</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/security-management/262884.html">相关链接-3、freebuf</a></p>
<h4 id="00x4-数据库提权"><a class="markdownIt-Anchor" href="#00x4-数据库提权"></a> 00x4-数据库提权：</h4>
<h5 id="mysql数据库提权"><a class="markdownIt-Anchor" href="#mysql数据库提权"></a> MySQL数据库提权：</h5>
<p><a target="_blank" rel="noopener" href="https://www.sqlsec.com/2020/11/mysql.html">相关链接-1、国光</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/264790.html">相关链接-2、freebuf</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/291099.html">相关链接-3、freebuf</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40412037/article/details/112541157">相关链接-4、csdn</a></p>
<h5 id="sql-server数据库提权"><a class="markdownIt-Anchor" href="#sql-server数据库提权"></a> SQL Server数据库提权：</h5>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40412037/article/details/112858836">相关链接-1、csdn</a></p>
<p><a target="_blank" rel="noopener" href="https://www.geekby.site/2021/01/mssql%E6%B3%A8%E5%85%A5%E4%B8%8E%E6%8F%90%E6%9D%83%E6%96%B9%E6%B3%95%E6%95%B4%E7%90%86/">相关链接-2、nice</a></p>
<p><a target="_blank" rel="noopener" href="https://y4er.com/post/mssql-getshell/">相关链接-3、y4er</a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/8188">相关链接-4、先知</a></p>
<h5 id="oreace数据库提权"><a class="markdownIt-Anchor" href="#oreace数据库提权"></a> oreace数据库提权：</h5>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_17204441/article/details/89529792">相关链接-1</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/-qing-/p/10758613.html">相关链接-2</a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/2719">相关链接-3</a></p>
<h4 id="00x5-dll劫持提权"><a class="markdownIt-Anchor" href="#00x5-dll劫持提权"></a> 00x5-DLL劫持提权：</h4>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44032232/article/details/114366001">相关链接-1</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bonelee/p/15865356.html">相关链接-2</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1782861">相关链接-3</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/ReL-8U1ZJDp3kbna8GDYmg">相关链接-4</a></p>
<h4 id="00x6-令牌窃取"><a class="markdownIt-Anchor" href="#00x6-令牌窃取"></a> 00x6-令牌窃取：</h4>
<p>适用于Windows2008之前的版本</p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1752172">相关链接-1、原理及利用</a></p>
<p><a target="_blank" rel="noopener" href="https://fireline.fun/2021/01/29/%E4%BB%A4%E7%89%8C%E7%AA%83%E5%8F%96%E5%88%86%E6%9E%90%E5%8F%8A%E9%98%B2%E8%8C%83/">相关链接-2、令牌窃取分析</a></p>
<p><a target="_blank" rel="noopener" href="https://coar.wang/article/85">相关链接-3、窃取提权手法</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zzlx123/article/details/104789819/">相关链接-4</a></p>
<h4 id="00x7-烂土豆提权"><a class="markdownIt-Anchor" href="#00x7-烂土豆提权"></a> 00x7-烂土豆提权：</h4>
<p>需要配合令牌窃取来进行提权</p>
<p>MS16-075</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/bcf128fda3c4">相关链接-1、流程</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/bonelee/p/15864781.html">相关链接-2、复现</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/god_zzZ/article/details/106334702">相关链接-3、原理及利用</a></p>
<h5 id="一般流程"><a class="markdownIt-Anchor" href="#一般流程"></a> 一般流程：</h5>
<p><strong>一般烂土豆需要来配合令牌窃取来进行提权</strong></p>
<p>注意（重点：用烂土豆配合本地用户提权是成功不了的，必须是web权限或数据库权限</p>
<ol>
<li>单纯令牌窃取：Web权限或本地权限</li>
<li>配合烂土豆提权：web权限或数据库等权限</li>
</ol>
<p><strong>烂土豆提权原理</strong></p>
<p>1、欺骗 “NT   AUTHORITY\SYSTEM”账户通过NTLM认证到我们控制的TCP终端。</p>
<p>2、对这个认证过程使用中间人攻击（NTLM重放），为“NT   AUTHORITY\SYSTEM”账户本地协商一个安全令牌。这个过程是通过一系列的Windows API调用实现的。</p>
<p>3、模仿这个令牌。只有具有“模仿安全令牌权限”的账户才能去模仿别人的令牌。一般大多数的服务型账户（IIS、MSSQL等）有这个权限，大多数用户级的账户没有这个权限。</p>
<p>所以，一般从web拿到的webshell都是IIS服务器权限，是具有这个模仿权限的。测试过程中，我发现使用已经建好的账户（就是上面说的用户级账户）去反弹meterpreter然后再去执行EXP的时候会失败，但使用菜刀（IIS服务器权限）反弹meterpreter就会成功。</p>
<p><strong>攻击方法</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">meterpreter &gt; upload</span><br><span class="line">/root/Rottenpotato/rottenpotato.exe</span><br><span class="line">meterpreter &gt; execute -HC -f rottenpotato.exe</span><br><span class="line">meterpreter &gt; use incognito</span><br><span class="line">meterpreter &gt; list_tokens -u</span><br><span class="line">会发现令牌列表里面存在system的令牌，在用system的令牌进行提权</span><br></pre></td></tr></table></figure>
<p><strong>烂土豆版本</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">RottonPatato脚本：</span><br><span class="line">https://github.com/SecWiki/windows-kernel-exploits/blob/master/MS16-075/potato.exe</span><br><span class="line">https://github.com/breenmachine/RottenPotatoNG/blob/master/RottenPotatoEXE/x64/Release/MSFRottenPotato.exe</span><br><span class="line">https://github.com/foxglovesec/RottenPotato</span><br></pre></td></tr></table></figure>
<h4 id="00x8-可信任服务路径漏洞"><a class="markdownIt-Anchor" href="#00x8-可信任服务路径漏洞"></a> 00x8-可信任服务路径漏洞</h4>
<p><a target="_blank" rel="noopener" href="http://zhuabapa.top/2020/07/14/%E5%88%A9%E7%94%A8%E9%85%8D%E7%BD%AE%E9%94%99%E8%AF%AF%E6%8F%90%E6%9D%83/">相关链接</a><br />
如果一个服务的可执行文件的路径没有被双引号引起来且包含空格，那么这个服务就是有漏洞的</p>
<h5 id="漏洞原理"><a class="markdownIt-Anchor" href="#漏洞原理"></a> 漏洞原理</h5>
<p>这里假设有一个服务路径</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Program                   Files                  (x86)\CommonFiles\Tencent\QQMusic\QQMusicService.exe</span><br></pre></td></tr></table></figure>
<p>带引号时：&quot;C:\Program Files (x86)\CommonFiles\Tencent\QQMusic\QQMusicService.exe&quot;会被看成一个完整的服务路径，故不会产生漏洞。<br />
不带引号时：我们认为的服务路径是C:\Program Files(x86)\Common Files\Tencent\QQMusic\QQMusicService.exe，但是由于没有双引号的包裹，Windows会认为C:\Program空格后面的为Program这个程序的参数来进行启动服务。这样攻击者就可以命名一个为Program.exe的后门文件放在c盘下，进而等待含漏洞服务路径的启动或重启导致后门文件的执行。</p>
<h5 id="攻击方法"><a class="markdownIt-Anchor" href="#攻击方法"></a> 攻击方法</h5>
<p>1.寻找存在漏洞的服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wmic service get name,displayname,pathname,startmode | findstr/i &quot;Auto&quot; | findstr /i /v &quot;C:\Windows\\&quot; | findstr /i /v &quot;&quot;&quot;</span><br></pre></td></tr></table></figure>
<p>2.把我们后门文件重命名放在对应的文件路径下<br />
3.在msf上进行监听，然后启动对应服务<br />
4.接收到shell，且是system权限<br />
5.msf 检测攻击模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exploit/windows/local/unquoted_service_path</span><br></pre></td></tr></table></figure>
<p>正常接收到会话后，不久就会自动断开连接，需要开启命令自动迁移进程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set AutoRunScript migrate -f</span><br></pre></td></tr></table></figure>
<h4 id="00x9-不安全服务权限配合计划任务schtasks或sc命令利用"><a class="markdownIt-Anchor" href="#00x9-不安全服务权限配合计划任务schtasks或sc命令利用"></a> 00x9-不安全服务权限配合计划任务schtasks或SC命令利用</h4>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Wb80ln3R0h14PAhn2VfoBw">相关链接-1、这个所有的漏洞将的都挺全面的</a></p>
<h5 id="漏洞原理-2"><a class="markdownIt-Anchor" href="#漏洞原理-2"></a> 漏洞原理</h5>
<p>如果攻击者对以高权限运行的任务所在的目录具有写权限，就可以使用覆盖原来的服务路径，进而启动我们的恶意程序。（一般用来administrator提权到system，因为普通用户用sc修改服务路径会没有权限，导致不能用该方法提权。）</p>
<h4 id="00x10-unattended-installs自动安装"><a class="markdownIt-Anchor" href="#00x10-unattended-installs自动安装"></a> 00x10-Unattended Installs（自动安装）</h4>
<h5 id="漏洞原理-3"><a class="markdownIt-Anchor" href="#漏洞原理-3"></a> 漏洞原理：</h5>
<p>自动安装允许程序在不需要管理员关注下自动安装。这种解决方案用于在拥有较多 雇 员 和 时 间 紧 缺 的 较 大型组织中部署程序。如果管理员没有进行清理的话，那么会有一个名为Unattend的XML文件残存在系统上。这个XML文件包含所有在安装程序过程中的配置，包括一些本地用户的配置，以及管理员账户。全盘搜索Unattend文件是个好办法，它通常会在以下一个文件夹中</p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Wb80ln3R0h14PAhn2VfoBw">相关链接-1</a></p>
<h4 id="00x11-alwaysinstallelevated"><a class="markdownIt-Anchor" href="#00x11-alwaysinstallelevated"></a> 00x11-AlwaysInstallElevated</h4>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/bring_coco/article/details/113287835">相关链接-1、csdn</a></p>
<p><a target="_blank" rel="noopener" href="http://uuzdaisuki.com/2021/06/09/AlwaysInstallElevated%E6%8F%90%E6%9D%83/">相关链接-2、讲的挺细的</a></p>
<p><a target="_blank" rel="noopener" href="https://3gstudent.github.io/%E5%88%A9%E7%94%A8AlwaysInstallElevated%E6%8F%90%E6%9D%83%E7%9A%84%E6%B5%8B%E8%AF%95%E5%88%86%E6%9E%90">相关链接-3、推荐</a></p>
<h5 id="漏洞原理-4"><a class="markdownIt-Anchor" href="#漏洞原理-4"></a> 漏洞原理：</h5>
<p>AlwaysInstallElevated 是一种允许非管理用户以SYSTEM权限运行Microsoft Windows安装程序包（.MSI文件）的设置。默认情况下禁用此设置，需系统管理员手动启用他。</p>
<h4 id="00x12-策略组首选项提权"><a class="markdownIt-Anchor" href="#00x12-策略组首选项提权"></a> 00x12-策略组首选项提权</h4>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/7784">相关链接-1、先知</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Yang34/p/12492270.html">相关链接-2、推荐</a></p>
<p><a target="_blank" rel="noopener" href="http://zhuabapa.top/2020/07/14/%E7%BB%84%E7%AD%96%E7%95%A5%E9%A6%96%E9%80%89%E9%A1%B9%E6%8F%90%E6%9D%83%E4%B8%8EUAC%E7%BB%95%E8%BF%87/">相关链接-3</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45682070/article/details/106809062">相关链接-4</a></p>
<h4 id="00x13-计划任务提权"><a class="markdownIt-Anchor" href="#00x13-计划任务提权"></a> 00x13-计划任务提权</h4>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45701675/article/details/121397749">相关链接-1</a></p>
<p><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1683105">相关链接-2</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44032232/article/details/114168765">相关链接-3、推荐</a></p>
<h5 id="at命令"><a class="markdownIt-Anchor" href="#at命令"></a> at命令</h5>
<p>在Windows2000、Windows 2003、Windows XP 这三类系统中，我们可以使用at命令将权限提升至system权限</p>
<h5 id="sc命令"><a class="markdownIt-Anchor" href="#sc命令"></a> sc命令</h5>
<p>适用于windows 7/8、03/08、12/16</p>
<p>因为at命令在win7，win8等更高版本的系统上都已经取消掉了，所以在一些更高版本的windows操作系统上我们可以用sc命令进行提权，下面是sc的百度解释。</p>
<p>SC命令是XP系统中功能强大的DOS命令,SC命令能与“服务控制器”和已安装设备进行通讯。SC是用于与服务控制管理器和服务进行通信的命令行程序。</p>
<h3 id="相关资料-工具"><a class="markdownIt-Anchor" href="#相关资料-工具"></a> 相关资料、工具</h3>
<p><a target="_blank" rel="noopener" href="http://zoukba.live/2021/04/16/%E5%86%85%E7%BD%91%E6%8F%90%E6%9D%83%E6%96%B9%E6%B3%95/">windows提权-1、还算详细</a></p>
<p><a target="_blank" rel="noopener" href="https://www.geekby.site/2021/01/windows%E6%8F%90%E6%9D%83%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93/">windows提权-2</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/Wb80ln3R0h14PAhn2VfoBw">windows提权-3、猪猪说安全、推荐</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/terminal/259256.html">windows提权-4、freebuf</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">相关资料</span><br><span class="line">https://jokerjq.lanzouw.com/ikeWN0167r4b</span><br><span class="line">密码:ea29</span><br><span class="line"></span><br><span class="line">提权工具</span><br><span class="line">https://jokerjq.lanzouw.com/iMDAD0167uoj</span><br><span class="line">密码:b814</span><br><span class="line"></span><br><span class="line">GitHub开源相关CVE</span><br><span class="line">https://github.com/SecWiki/windows-kernel-exploits     #windows提权必看大杀器</span><br><span class="line">http://kernelhub.ascotbe.com/                          #相关文库</span><br><span class="line">https://github.com/nomi-sec/PoC-in-GitHub              #收集的GitHub上每年发布的cve、poc</span><br><span class="line">https://github.com/Mr-xn/Penetration_Testing_POC       #搜集有关渗透测试中用到的POC、脚本、工具、文章等姿势分享-特别全</span><br><span class="line">https://github.com/binganao/vulns-2022                 #搜集 2022 年的漏洞</span><br></pre></td></tr></table></figure>
<h3 id="linux-2"><a class="markdownIt-Anchor" href="#linux-2"></a> Linux</h3>
<h4 id="先进行必要的检查"><a class="markdownIt-Anchor" href="#先进行必要的检查"></a> 先进行必要的检查</h4>
<p>使用到的工具</p>
<p><img src="../images/image-20220312172331903.png" alt="image-20220312172331903" /></p>
<p>下载链接</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/mzet-/linux-exploit-suggester</span><br><span class="line">https://github.com/rebootuser/LinEnum</span><br><span class="line">https://github.com/sleventyeleven/linuxprivchecker</span><br></pre></td></tr></table></figure>
<h4 id="常用漏洞"><a class="markdownIt-Anchor" href="#常用漏洞"></a> 常用漏洞</h4>
<h5 id="cve-2016-5195"><a class="markdownIt-Anchor" href="#cve-2016-5195"></a> CVE-2016-5195</h5>
<p>脏牛提权</p>
<ul>
<li><strong>影响范围</strong></li>
</ul>
<p>Linux kernel &gt;= 2.6.22（2007年发行）开始就受影响了，直到2016年10月18日才修复。</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaozi/p/13370721.html">相关链接-1</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/C1ayblog/p/15657043.html">相关链接-2</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/df72d1ee1e3e">相关链接-3</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/FireFart/dirtycow">exp-1</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/gbonacini/CVE-2016-5195">exp-2</a></p>
<h5 id="cve-2017-16995"><a class="markdownIt-Anchor" href="#cve-2017-16995"></a> CVE-2017-16995</h5>
<p><a target="_blank" rel="noopener" href="https://a1ex.online/2021/04/24/CVE-2017-16995-%E5%86%85%E6%A0%B8%E6%8F%90%E6%9D%83%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90/">相关链接-1</a></p>
<p><a target="_blank" rel="noopener" href="https://v1ckydxp.github.io/2019/09/02/2019-09-02-cve-2017-16995%20%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/">相关链接-2</a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/2212">相关链接-3、先知</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/rlarabee/exploits/blob/master/cve-2017-16995/cve-2017-16995.c">exp-1</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Al1ex/CVE-2017-16995">exp-2</a></p>
<h5 id="cve-2019-13272"><a class="markdownIt-Anchor" href="#cve-2019-13272"></a> CVE-2019-13272</h5>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Kris__zhang/article/details/116643422">相关链接-1</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/vuls/261242.html">相关链接-2</a></p>
<p><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/183528">相关链接-3、freebuf</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/jiayy/android_vuln_poc-exp/tree/master/EXP-CVE-2019-13272-aarch64">exp-1</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/jas502n/CVE-2019-13272">exp-2</a></p>
<h5 id="docker提权"><a class="markdownIt-Anchor" href="#docker提权"></a> docker提权</h5>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46700042/article/details/109532502">最常用的docker root提权</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/q20010619/article/details/121430885">相关链接-1</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.zjun.info/2021/some-docker-escape-vulnerabilities.html">相关链接-2、详细</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/89b329626621">相关链接-3</a></p>
<h4 id="00x1-内核提权"><a class="markdownIt-Anchor" href="#00x1-内核提权"></a> 00x1-内核提权</h4>
<p>脏牛内核提权</p>
<h4 id="00x2-suid配置错误提权"><a class="markdownIt-Anchor" href="#00x2-suid配置错误提权"></a> 00x2-SUID配置错误提权</h4>
<p>SUID可以让程序调用者以文件拥有者的身份运行该文件，当我们以一个普通用户去运行一个root用户所有的SUID文件，那么运行该文件我们就可以获取到root权限</p>
<h4 id="00x3-计划任务提权"><a class="markdownIt-Anchor" href="#00x3-计划任务提权"></a> 00x3-计划任务提权</h4>
<p>系统内可能会有一些定时执行的任务，一般这些任务由crontab来管理，具有所属用户的权限。非root权限的用户是不可以列出root用户的计划任务的。但是/etc/内系统的计划任务可以被列出。利用命令如下命令列出一些计划任务</p>
<h4 id="00x4-sudo提权"><a class="markdownIt-Anchor" href="#00x4-sudo提权"></a> 00x4-sudo提权</h4>
<p>普通用户一般是无法运行root所有者的命令的，运用sudo可以使普通用户使用root用户的命令。但是在一些场景下，管理员为了平常运营方便给sudoer文件配置不当，从而导致权限提升的问题产生。</p>
<h4 id="00x5-明文root密码提权"><a class="markdownIt-Anchor" href="#00x5-明文root密码提权"></a> 00x5-明文root密码提权</h4>
<p>大多数linux系统的密码都和/etc/passwd和/etc/shadow这两个配置文件息息相关。passwd里面储存了用户，shadow里面是密码的hash。出于安全考虑passwd是全用户可读，root可写的。shadow是仅root可读写的。</p>
<h4 id="00x6-密码复用提权"><a class="markdownIt-Anchor" href="#00x6-密码复用提权"></a> 00x6-密码复用提权</h4>
<p>当我们获取到一些如数据库、后台 web 密码，可能就是 root 密码、大概的意思和爆破其实事差不多的、然后还需要的就是、前期的信息收集的程度如何</p>
<h4 id="00x7-第三方服务提权-限于有root权限"><a class="markdownIt-Anchor" href="#00x7-第三方服务提权-限于有root权限"></a> 00x7-第三方服务提权、限于有root权限</h4>
<p>netstat -antup #查看各种网络服务</p>
<h5 id="1-nfs提权"><a class="markdownIt-Anchor" href="#1-nfs提权"></a> 1、NFS提权</h5>
<p>当服务器中存在NFS共享，且开启了no_root_squash选项时，这时如果客户端使用的是root用户，那么对于共享目录来说，该客户端就有root权限，可以使用它来提升权限。</p>
<h5 id="2-数据库提权"><a class="markdownIt-Anchor" href="#2-数据库提权"></a> 2、数据库提权</h5>
<p>①UDF提权<br />
②MOF提权<br />
③启动项提权<br />
④CVE-2016-6663、CVE-2016-6664组合提权<br />
⑤反弹端口提权</p>
<h4 id="00x8-通配符注入"><a class="markdownIt-Anchor" href="#00x8-通配符注入"></a> 00x8-通配符注入</h4>
<p>通配符是代表其他字符的符号。您可以将它们与任何命令（例如cat或rm命令）一起使用，以列出或删除符合给定条件的文件。还有其他一些，但是现在对我们很重要的一个是*字符，它可以匹配任意数量的字符。</p>
<h2 id="00x5-免杀"><a class="markdownIt-Anchor" href="#00x5-免杀"></a> 00x5-免杀</h2>
<h3 id="常用免杀软件"><a class="markdownIt-Anchor" href="#常用免杀软件"></a> 常用免杀软件</h3>
<p>[掩目](<a target="_blank" rel="noopener" href="https://jokerjq.lanzouw.com/ieHL501ep4te">https://jokerjq.lanzouw.com/ieHL501ep4te</a><br />
密码:fs9k)</p>
<p><a target="_blank" rel="noopener" href="https://github.com/linshaoSec/GobypassAv">GobypassAv</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Sec-Fork/GoBypass">GoBypass</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Cerbersec/KillDefenderBOF">KillDefenderBOF</a>    kill-Windows Deferder</p>
<p><a target="_blank" rel="noopener" href="https://github.com/pwn1sher/KillDefender">KillDefender</a>             KillDefender</p>
<p><a target="_blank" rel="noopener" href="https://github.com/lab52io/StopDefender">StopDefender</a>          StopDefender</p>
<p><a target="_blank" rel="noopener" href="https://github.com/last-byte/DefenderSwitch">DefenderSwitch</a>       DefenderSwitch—kill Windows Deferder</p>
<p><a target="_blank" rel="noopener" href="https://github.com/crow821/crowsec">crowsec_shelllcodeBypass</a>     乌鸦安全</p>
<p><a target="_blank" rel="noopener" href="https://github.com/An0nySec/SchTask_0x727">创建隐藏计划任务，权限维持</a></p>
<p>[python免杀学习](<a target="_blank" rel="noopener" href="https://jokerjq.lanzouw.com/iBqzb01epkub">https://jokerjq.lanzouw.com/iBqzb01epkub</a><br />
密码:4qob)         非常实用</p>
<p><a target="_blank" rel="noopener" href="https://www.ddosi.org/foureye/">FourEye-杀毒软件绕过工具|exe免杀快速生成器</a>    现在挺火的一个</p>
<h3 id="免杀学习地址"><a class="markdownIt-Anchor" href="#免杀学习地址"></a> 免杀学习地址</h3>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/tidesec/bypassav">Tidesec团队的免杀专题学习</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/TideSec/BypassAntiVirus">GitHub上收集的免杀专题</a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/10369">先知、免杀入门学习</a></p>
<p><a target="_blank" rel="noopener" href="https://wh0ale.github.io/2019/01/23/2019-1-23-%E5%85%8D%E6%9D%80%E6%96%B9%E6%B3%95%E5%A4%A7%E9%9B%86%E5%90%88/">免杀方法大合集</a></p>
<h2 id="00x6-内网信息搜集"><a class="markdownIt-Anchor" href="#00x6-内网信息搜集"></a> 00x6-内网信息搜集</h2>
<h3 id="主要包括的方面"><a class="markdownIt-Anchor" href="#主要包括的方面"></a> 主要包括的方面</h3>
<h4 id="0x01-搜集当前已控跳板机的各类敏感信息"><a class="markdownIt-Anchor" href="#0x01-搜集当前已控跳板机的各类敏感信息"></a> 0x01-搜集当前已控“跳板机”的各类敏感信息：</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">获取本机所有服务/进程[包括各个进程的详细权限，也包括目标系统中的可疑恶意进程（有可能是同行的马）]/端口/网络连接信息</span><br><span class="line"></span><br><span class="line">获取本机所用杀软/监控种类[后续好针对性的做免杀]</span><br><span class="line"></span><br><span class="line">获取本机rdp/ssh端口开启状态及其默认端口号</span><br><span class="line"></span><br><span class="line">获取本机所有用户的rdp外连记录</span><br><span class="line"></span><br><span class="line">获取本机的所有SSH登录记录</span><br><span class="line"></span><br><span class="line">获取当前系统所有登录成功的日志[针对windows]</span><br><span class="line"></span><br><span class="line">获取本机所有已安装软件的详细列表[主要为抓密码，提权，留后门做准备]</span><br><span class="line"></span><br><span class="line">获取本机各个浏览器中保存的所有书签页及历史浏览记录</span><br><span class="line"></span><br><span class="line">获取当前用户创建的所有计划任务列表及计划任务所对应的执行脚本内容[有些执行脚本中很可能存的有各种连接账号密码]</span><br><span class="line"></span><br><span class="line">获取当前用户桌面及回收站里的所有文件列表</span><br><span class="line"></span><br><span class="line">获取当前系统的所有存在suid权限的二进制程序</span><br><span class="line"></span><br><span class="line">获取当前系统代理[ip&amp;端口]</span><br><span class="line"></span><br><span class="line">获取当前系统所有的自启动注册表项值</span><br><span class="line"></span><br><span class="line">获取当前系统的所有ipc连接及已启用共享</span><br><span class="line"></span><br><span class="line">获取当前系统的所有挂载[mount]</span><br><span class="line"></span><br><span class="line">获取当前系统的防火墙状态</span><br><span class="line"></span><br><span class="line">获取当前系统所有分区/盘符及其详细使用情况</span><br><span class="line"></span><br><span class="line">获取本机的累计开机时长</span><br><span class="line"></span><br><span class="line">获取本机arp/dns缓存</span><br><span class="line"></span><br><span class="line">获取当前机器环境变量[主要想看看目标机器上有无python,jdk,ruby...等语言的执行环境，后期可设法利用]</span><br><span class="line"></span><br><span class="line">获取当前系统所有本地用户及组列表</span><br><span class="line"></span><br><span class="line">获取当前系统host文件内容</span><br><span class="line"></span><br><span class="line">获取当前机器硬件设备信息[主要为判断当前机器是否为虚拟机]</span><br><span class="line"></span><br><span class="line">远程截屏捕捉目标用户敏感操作</span><br></pre></td></tr></table></figure>
<h4 id="0x02-搜集当前已控跳板机的内网信息"><a class="markdownIt-Anchor" href="#0x02-搜集当前已控跳板机的内网信息"></a> 0x02-搜集当前已控“跳板机”的内网信息</h4>
<h5 id="主要方面"><a class="markdownIt-Anchor" href="#主要方面"></a> 主要方面</h5>
<p>1.利用当前已控“跳板机”，分析目标内网大致网络拓扑及所有关键性业务机器分布：</p>
<p>2.批量抓取内网所有windows机器名和所在“域”/“工作组名”[smb探测扫描]：</p>
<p>3.针对内网的各种高危敏感服务定位【安全“端口扫描（在避免对方防护报警拦截的情况下进行各种常规服务探测识别）】：</p>
<p>4.内网批量Web Banner抓取获取关键目标业务系统如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">内网各种文件【共享】服务器</span><br><span class="line"></span><br><span class="line">内网各类web服务器【可用于后期留入口】</span><br><span class="line"></span><br><span class="line">内网各类数据库服务器</span><br><span class="line"></span><br><span class="line">内网邮件服务器【可用于后期留入口】</span><br><span class="line"></span><br><span class="line">内网Vpn服务器【可用于后期留入口】</span><br><span class="line"></span><br><span class="line">内网各类常规资产状态监控服务器，eg:zabbix,nagios,cacti...</span><br><span class="line"></span><br><span class="line">内网各类防护的主控端，比如，防火墙，EDR,态势感知产品的web主控端...</span><br><span class="line"></span><br><span class="line">内网日志服务器</span><br><span class="line"></span><br><span class="line">内网补丁服务器</span><br><span class="line"></span><br><span class="line">内网各类OA,ERP,CRM,SRM,HR系统...</span><br><span class="line"></span><br><span class="line">内网打印服务器</span><br><span class="line"></span><br><span class="line">内网MES系统</span><br><span class="line"></span><br><span class="line">内网虚拟化服务器/超融合平台[Vmware ESX]</span><br><span class="line"></span><br><span class="line">内网堡垒机...</span><br><span class="line"></span><br><span class="line">内网运维，研发部门员工的机器</span><br><span class="line"></span><br><span class="line">内网路由，交换设备...</span><br></pre></td></tr></table></figure>
<h4 id="0x03-主动密码搜集"><a class="markdownIt-Anchor" href="#0x03-主动密码搜集"></a> 0x03-主动密码搜集</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">批量抓取当前机器上的“各类基础服务配置文件中保存的各种账号密码”</span><br><span class="line">比如，各种数据库连接配置文件，各类服务自身的配置文件（redis,http basic...)...</span><br><span class="line"></span><br><span class="line">想办法“控制目标运维管理/技术人员的单机，从这些机器上去搜集可能保存着各类敏感网络资产的账号密码表”</span><br><span class="line">比如，*.<span class="built_in">ls</span>,*.doc,*.docx,*.txt....</span><br><span class="line"></span><br><span class="line">抓取各类“数据库客户端工具中保存各种数据库连接账号密码</span><br><span class="line">比如，Navicat,SSMS[MSSQL自带客户端管理工具，里面也可能保存的有密码（加密后的base64)]</span><br><span class="line"></span><br><span class="line">抓取当前系统“注册表中保存的各类账号密码<span class="built_in">hash</span><span class="string">&quot;[Windows]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">抓取当前系统所有“本地用户的明文密码/hash&quot;</span>[Windows&amp;linux]</span><br><span class="line"></span><br><span class="line">抓取当前系统的所有“用户token<span class="string">&quot;[Windows]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">抓取“windows凭据管理器中保存的各类连接账号密码“</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">抓取“MSTSC客户端中保存的所有rdp连接账号密码“</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">抓取各类“VNC客户端工具中保存的连接密码“</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">抓取“GPP目录下保存的各类账号密码”[包括组策略目录中XML里保存的密码hash和NETLOGON目录下的某些脚本中保存的账号密码]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">抓取各类&quot;</span>SSH客户端工具中保存的各种linux系统连接账号密码<span class="string">&quot;,SecureCRT,Xshell,WinSCP,putty</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">抓取各类“浏览器中保存的各种web登录密码”，Chrome[360浏览器],Firefox,IE,QQ浏览器</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">抓取各类“数据库表中保存的各类账号密码hash&quot;</span></span><br><span class="line"></span><br><span class="line">抓取各类“FTP客户端工具中保存的各种ftp登录账号密码“，filezila,xftp...</span><br><span class="line"></span><br><span class="line">抓取各类“邮件客户端工具中保存的各种邮箱账号密码“，forxmail,thunderbird...</span><br><span class="line"></span><br><span class="line">抓取各类“SVN客户端工具中保存的所有连接账号密码及项目地址</span><br><span class="line"></span><br><span class="line">抓取各类“VPN客户端工具中保存的各种vpn链接账号密码”</span><br></pre></td></tr></table></figure>
<h4 id="00x4-被动密码搜集"><a class="markdownIt-Anchor" href="#00x4-被动密码搜集"></a> 00x4-被动密码搜集</h4>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Windows SSP [持久化/内存]</span><br><span class="line"></span><br><span class="line">Hook PasswordChangeNotify [持久化/内存]</span><br><span class="line"></span><br><span class="line">OWA登录账号密码截获</span><br><span class="line"></span><br><span class="line">截获mstsc.exe中输入的rdp连接账号密码</span><br><span class="line"></span><br><span class="line">linux别名记录利用</span><br><span class="line"></span><br><span class="line">本机明文密码嗅探[http,ftp,pop3...]</span><br><span class="line"></span><br><span class="line">传统键盘记录</span><br><span class="line"></span><br><span class="line">windows蓝屏技巧[此操作主要为应对不时之需，比如，搞蓝屏，登管理员登录抓密码]</span><br></pre></td></tr></table></figure>
<p>对于一般内网的dc肯定都是Windows这是毫无疑问的、下面关于Windows内网的信息搜集直接看下面着个就行</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/21r000/p/15612307.html">Windows信息搜集1-域、工作组</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/21r000/p/15621438.html">Windows信息搜集2-SPN</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/21r000/p/15650227.html">Windows信息搜集3-凭证搜集</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/21r000/p/15651341.html">Windows信息搜集4-内网存活主机探测</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/21r000/p/15656584.html">Windows信息搜集5-DNS域传输漏洞</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s?__biz=MzAwMjA5OTY5Ng==&amp;mid=2247486933&amp;idx=1&amp;sn=3b2c700da78d1cf34ab32352f9d91f07&amp;chksm=9acedd4aadb9545cfee0e5bf2f8b127aaad34626461f99a0ba9f817ce704b351160f8e74757e&amp;scene=27#wechat_redirect">内网渗透之windows、linux信息收集</a></p>
<h3 id="内网横向移动"><a class="markdownIt-Anchor" href="#内网横向移动"></a> 内网横向移动</h3>
<p><a target="_blank" rel="noopener" href="https://yoga7xm.top/2019/04/29/lPentest-domain/">委派与中继、很详细</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_45742511/article/details/117170521">大杂烩、这个可以</a></p>
<p><a target="_blank" rel="noopener" href="https://lunamoore.github.io/2021/08/14/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95-%E5%9F%9F%E5%86%85%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8/">大杂烩2</a></p>
<h2 id="00x7-内网转发"><a class="markdownIt-Anchor" href="#00x7-内网转发"></a> 00x7-内网转发</h2>
<h3 id="内网常用隧道转发代理穿透手法提炼汇总"><a class="markdownIt-Anchor" href="#内网常用隧道转发代理穿透手法提炼汇总"></a> 内网常用“隧道&quot;/“转发”/&quot;代理&quot;穿透手法提炼汇总</h3>
<h4 id="内网出网探测"><a class="markdownIt-Anchor" href="#内网出网探测"></a> 内网出网探测：</h4>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Thorndike/p/15324369.html">相关链接-1、详细</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zpchcbd/p/11693717.html">相关链接-2、实用</a></p>
<p><a target="_blank" rel="noopener" href="https://yoga7xm.top/2019/03/27/IPentest-discover/">内网探测</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/FunnyWolf/TFirewall">工具、防火墙出网探测工具,内网穿透型socks5代理</a></p>
<h3 id="内网转发"><a class="markdownIt-Anchor" href="#内网转发"></a> 内网转发</h3>
<h4 id="相关资料-2"><a class="markdownIt-Anchor" href="#相关资料-2"></a> 相关资料</h4>
<p><a target="_blank" rel="noopener" href="https://www.anquanke.com/post/id/207687">相关链接-1、freebuf、内网转发工具总结</a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/8658">相关链接-2、先知、内网渗透转发代理</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/256415.html">相关链接-3、freebuf、代理转发</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freesion.com/article/6682178560/">相关链接-4、乌云安全、内网渗透之端口转发&amp;端口映射</a></p>
<p><a target="_blank" rel="noopener" href="https://houkc.github.io/2021/01/18/trafficForwarding/">相关链接-5、内网流量转发</a></p>
<p><a target="_blank" rel="noopener" href="https://zerokeeper.com/experience/network-port-forwarding-and-penetration.html">相关链接-6、端口转发及穿透、推荐</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/whatday/article/details/120607868">相关链接-7、csdn、内网端口 转发 穿透 工具简介</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/YMqyfRxkoNqQihZHKfvN8Q">相关链接-8、谢公子、内网转发</a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/10867#toc-0">实战实例</a></p>
<h4 id="相关工具"><a class="markdownIt-Anchor" href="#相关工具"></a> 相关工具</h4>
<p><a target="_blank" rel="noopener" href="https://github.com/r00t-3xp10it/venom">毒液</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/snail007/goproxy/">goproxy</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/idlefire/ew">ew</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/UndefinedIdentifier/LCX">lcx、修改版</a></p>
<p><a target="_blank" rel="noopener" href="https://download.csdn.net/download/weixin_39858881/10862157?utm_medium=distribute.pc_relevant_download.none-task-download-2~default~BlogCommendFromBaidu~Rate-2.filterfilesuffix_v2&amp;depth_1-utm_source=distribute.pc_relevant_download.none-task-download-2~default~BlogCommendFromBaidu~Rate-2.filterfilesuffix_v2&amp;dest=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fweixin_39858881%2F10862157&amp;spm=1003.2020.3001.6616.2">lcx、原版</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/chdav/GoWard">goward</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/FunnyWolf/pystinger">使用webshell进行流量转发的出网工具</a></p>
<p><a target="_blank" rel="noopener" href="https://nmap.org/ncat/">netcat</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/SheXinK/article/details/103699038">MSF-socks5</a></p>
<h2 id="00x8-dc提权"><a class="markdownIt-Anchor" href="#00x8-dc提权"></a> 00x8-DC提权</h2>
<p>前面介绍的方式就足够了</p>
<h2 id="00x9-权限维持"><a class="markdownIt-Anchor" href="#00x9-权限维持"></a> 00x9-权限维持</h2>
<h3 id="windows-3"><a class="markdownIt-Anchor" href="#windows-3"></a> windows</h3>
<h4 id="相关资料-3"><a class="markdownIt-Anchor" href="#相关资料-3"></a> 相关资料</h4>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/376yMN3JHCn_ZAKJvtVTBg">相关链接-1、推荐、15种方式、国科漏斗社区</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/iFzYsWiWneAE_zGGZo7Miw">内网渗透-windows持久性后门</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/1UlmsyajxdVGLpXPaYVeYA">权限维持、文件隐藏</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/qe-R2p2sl4vzdusWIECDDw">15种方法、每天一个入狱小技巧</a></p>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/MKN5JOiOg-Iwqztfmn2P7g">HACK学习呀</a></p>
<h3 id="linux-3"><a class="markdownIt-Anchor" href="#linux-3"></a> Linux</h3>
<h4 id="相关资料-4"><a class="markdownIt-Anchor" href="#相关资料-4"></a> 相关资料</h4>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/JQ0lMRHJxw72lNK3XJGNSg">Tidesec</a></p>
<p><a target="_blank" rel="noopener" href="https://xz.aliyun.com/t/7338">先知、Linux权限维持</a></p>
<h2 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://0range-x.github.io/2022/01/26/Domain-penetration_one-stop/    #域渗透一条龙很详细</span><br><span class="line">https://mp.weixin.qq.com/s/2kgDX6Bn7vQlJp3FKrm3cw</span><br><span class="line">https://mp.weixin.qq.com/s/XvcYaVMBkWiH2BW7kCWfNQ</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">like4h</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/03/08/2984999730.html">http://example.com/2022/03/08/2984999730.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">like4h</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%99%E7%A8%8B/">教程</a><a class="post-meta__tags" href="/tags/%E6%B8%97%E9%80%8F%E6%B5%81%E7%A8%8B/">渗透流程</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2022/04/08/3sgAHoqV2mdCzU1.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/03/07/3614044942.html"><img class="prev-cover" src="https://s2.loli.net/2022/04/08/yArF9MhpxCblkRJ.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">python图形化-wxPython</div></div></a></div><div class="next-post pull-right"><a href="/2022/03/12/3412727995.html"><img class="next-cover" src="https://s2.loli.net/2022/04/08/RLAX9PN5ZmHuzgb.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">4年语雀会员免费领&amp;有道云笔记搬家</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/02/24/2052366137.html" title="Windows系统Git安装教程（Git 2.35.1.2最新版安装）"><img class="cover" src="https://s2.loli.net/2022/04/08/RLAX9PN5ZmHuzgb.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-24</div><div class="title">Windows系统Git安装教程（Git 2.35.1.2最新版安装）</div></div></a></div><div><a href="/2022/03/05/3634691787.html" title="fofa查询"><img class="cover" src="https://s2.loli.net/2022/04/08/yArF9MhpxCblkRJ.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-05</div><div class="title">fofa查询</div></div></a></div><div><a href="/2022/02/23/1912372181.html" title="php随机数种子破解"><img class="cover" src="https://s2.loli.net/2022/04/08/3sgAHoqV2mdCzU1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-23</div><div class="title">php随机数种子破解</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/index/avater.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">like4h</div><div class="author-info__description">心中有梦，眼里有光</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">37</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">29</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/like4h"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/like4h" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:flyingjq@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">like4h's Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.</span> <span class="toc-text"> 简介：</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#00x1-%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.1.</span> <span class="toc-text"> 00x1-信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%A4%96"><span class="toc-number">1.1.1.</span> <span class="toc-text"> 对外</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.1.2.</span> <span class="toc-text"> 基础信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E4%BF%A1%E6%81%AF-%E9%98%B2%E6%8A%A4%E4%BF%A1%E6%81%AF"><span class="toc-number">1.1.2.1.</span> <span class="toc-text"> 网站信息、防护信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%AB%99%E7%BB%84%E4%BB%B6%E4%BF%A1%E6%81%AF"><span class="toc-number">1.1.2.2.</span> <span class="toc-text"> 网站组件信息</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%88%E6%9E%9C"><span class="toc-number">1.1.2.2.1.</span> <span class="toc-text"> 效果：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cdn%E7%BB%95%E8%BF%87"><span class="toc-number">1.1.2.3.</span> <span class="toc-text"> cdn绕过</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E7%A0%81%E8%8E%B7%E5%8F%96"><span class="toc-number">1.1.2.4.</span> <span class="toc-text"> 源码获取</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E5%86%85"><span class="toc-number">1.1.3.</span> <span class="toc-text"> 对内</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AB%AF%E5%8F%A3%E4%BF%A1%E6%81%AF"><span class="toc-number">1.1.3.1.</span> <span class="toc-text"> 端口信息</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#masscan"><span class="toc-number">1.1.3.1.1.</span> <span class="toc-text"> masscan</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#nmap"><span class="toc-number">1.1.3.1.2.</span> <span class="toc-text"> nmap</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cms%E8%AF%86%E5%88%AB"><span class="toc-number">1.1.3.2.</span> <span class="toc-text"> cms识别</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#whatweb"><span class="toc-number">1.1.3.2.1.</span> <span class="toc-text"> whatweb</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95%E6%89%AB%E6%8F%8F"><span class="toc-number">1.1.3.3.</span> <span class="toc-text"> 目录扫描</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#disearch"><span class="toc-number">1.1.3.3.1.</span> <span class="toc-text"> disearch</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#gobuster"><span class="toc-number">1.1.3.3.2.</span> <span class="toc-text"> gobuster</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#dirmap"><span class="toc-number">1.1.3.3.3.</span> <span class="toc-text"> dirmap</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#00x2-%E5%A4%96%E7%BD%91%E6%89%93%E7%82%B9"><span class="toc-number">1.2.</span> <span class="toc-text"> 00x2-外网打点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#00x1-%E9%BB%91%E7%9B%92%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 00x1-黑盒测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.2.1.1.</span> <span class="toc-text"> 基本流程学习：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#00x2-%E7%99%BD%E7%9B%92%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 00x2-白盒测试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E9%93%BE%E6%8E%A5"><span class="toc-number">1.2.2.1.</span> <span class="toc-text"> 学习链接：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#0x3-%E9%BB%91%E7%99%BD%E7%9B%92%E6%B5%8B%E8%AF%95"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 0x3-黑白盒测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#00x4-%E9%92%88%E5%AF%B9%E7%BD%91%E7%AB%99cms"><span class="toc-number">1.2.4.</span> <span class="toc-text"> 00x4-针对网站cms</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7"><span class="toc-number">1.2.4.1.</span> <span class="toc-text"> 扫描工具：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#00x4-%E4%B8%AD%E9%97%B4%E4%BB%B6%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.</span> <span class="toc-text"> 00x4-中间件漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#struts2%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.1.</span> <span class="toc-text"> Struts2漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#weblogicl%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.2.</span> <span class="toc-text"> weblogicl漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jboss%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.3.</span> <span class="toc-text"> Jboss漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tomcat%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.4.</span> <span class="toc-text"> Tomcat漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jekins%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.5.</span> <span class="toc-text"> Jekins漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#elasticsearch%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.6.</span> <span class="toc-text"> ElasticSearch漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#rabbitmq%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.7.</span> <span class="toc-text"> RabbitMQ漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ibm-websphere%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.8.</span> <span class="toc-text"> IBM Websphere漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#axis2%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.9.</span> <span class="toc-text"> Axis2漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#apache-activemq%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.10.</span> <span class="toc-text"> Apache ActiveMQ漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#apache-solr%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.11.</span> <span class="toc-text"> Apache Solr漏洞</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#apache-zookeeper%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.5.12.</span> <span class="toc-text"> Apache Zookeeper漏洞</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#00x5-%E9%92%88%E5%AF%B9%E5%90%84%E7%B1%BB%E5%BC%80%E6%BA%90%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%B7%B2%E7%9F%A5nday%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.2.6.</span> <span class="toc-text"> 00x5-针对各类开源程序的已知Nday漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E5%B7%A5%E5%85%B7"><span class="toc-number">1.2.6.1.</span> <span class="toc-text"> 利用工具</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#00x5-%E6%8B%BFshell%E5%8F%AF%E8%83%BD%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.7.</span> <span class="toc-text"> 00x5-拿shell可能遇到的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%8D%E6%9D%80%E9%A9%AC%E7%9A%84%E5%87%86%E5%A4%87"><span class="toc-number">1.2.7.1.</span> <span class="toc-text"> 免杀马的准备：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%87d%E7%9B%BE"><span class="toc-number">1.2.7.1.1.</span> <span class="toc-text"> 过d盾</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%87%E5%AE%89%E5%85%A8%E7%8B%97"><span class="toc-number">1.2.7.1.2.</span> <span class="toc-text"> 过安全狗</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%87waf"><span class="toc-number">1.2.7.1.3.</span> <span class="toc-text"> 过WAF</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%8F%E9%A9%AC%E6%8D%A2%E5%A4%A7%E9%A9%AC"><span class="toc-number">1.2.7.1.4.</span> <span class="toc-text"> 小马换大马</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%A7%E9%A9%AC%E5%81%9A%E5%85%8D%E6%9D%80"><span class="toc-number">1.2.7.1.5.</span> <span class="toc-text"> 大马做免杀</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B7%A5%E5%85%B7%E9%9B%86%E5%90%88"><span class="toc-number">1.2.7.1.6.</span> <span class="toc-text"> 工具集合：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E5%B7%A5%E5%85%B7%E7%9A%84%E5%87%86%E5%A4%87"><span class="toc-number">1.2.7.2.</span> <span class="toc-text"> 连接工具的准备：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%87%E7%8B%97%E5%88%80"><span class="toc-number">1.2.7.2.1.</span> <span class="toc-text"> 过狗刀</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%B0%E8%9D%8E%E9%AD%94%E6%94%B9"><span class="toc-number">1.2.7.2.2.</span> <span class="toc-text"> 冰蝎魔改</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%95%E8%BF%87disbale_functions"><span class="toc-number">1.2.7.3.</span> <span class="toc-text"> 绕过disbale_functions:</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%A6%E4%B9%A0%E5%B7%A5%E5%85%B7%E5%8F%8A%E9%93%BE%E6%8E%A5"><span class="toc-number">1.2.7.3.1.</span> <span class="toc-text"> 学习工具及链接</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#00x3-%E6%8B%BF%E5%88%B0%E8%B7%B3%E6%9D%BF%E6%9C%BA"><span class="toc-number">1.3.</span> <span class="toc-text"> 00x3-拿到跳板机</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%B3%E6%9D%BF%E6%9C%BA%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 跳板机信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#windows"><span class="toc-number">1.3.1.1.</span> <span class="toc-text"> Windows</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%A7%BF%E5%8A%BF%E7%82%B9"><span class="toc-number">1.3.1.1.1.</span> <span class="toc-text"> 相关姿势点：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#linux"><span class="toc-number">1.3.1.2.</span> <span class="toc-text"> linux</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99"><span class="toc-number">1.3.1.3.</span> <span class="toc-text"> 相关资料：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#00x4-%E8%B7%B3%E6%9D%BF%E6%9C%BA%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.</span> <span class="toc-text"> 00x4-跳板机提权</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#windows-2"><span class="toc-number">1.4.1.</span> <span class="toc-text"> Windows</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF"><span class="toc-number">1.4.1.1.</span> <span class="toc-text"> 查看系统信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%85%E9%A1%BB%E6%A3%80%E6%9F%A5%E7%9A%84%E5%B8%B8%E7%94%A8%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.4.1.2.</span> <span class="toc-text"> 必须检查的常用漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B0%B8%E6%81%92%E4%B9%8B%E8%93%9D-ms17-010kb4013389"><span class="toc-number">1.4.1.2.1.</span> <span class="toc-text"> 永恒之蓝-MS17-010[KB4013389]</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ms14-068%E5%9F%9F%E6%8F%90%E6%9D%83kb3011780"><span class="toc-number">1.4.1.2.2.</span> <span class="toc-text"> ms14-068域提权[KB3011780]</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%80%81%E7%89%88%E6%9C%ACprintspoofer%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.4.1.2.3.</span> <span class="toc-text"> 老版本PrintSpoofer漏洞</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cve-2021-1675%E6%89%93%E5%8D%B0%E6%9C%BA%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.4.1.2.4.</span> <span class="toc-text"> CVE-2021-1675打印机远程代码执行漏洞</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cve-2020-1472%E5%9F%9F%E6%8E%A7%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.2.5.</span> <span class="toc-text"> CVE-2020-1472域控提权</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ms08-067"><span class="toc-number">1.4.1.2.6.</span> <span class="toc-text"> MS08-067</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ms14-058kb3000061"><span class="toc-number">1.4.1.2.7.</span> <span class="toc-text"> MS14-058[KB3000061]</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ms15-051kb3045171"><span class="toc-number">1.4.1.2.8.</span> <span class="toc-text"> MS15-051[KB3045171]</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ms15-077kb3077657"><span class="toc-number">1.4.1.2.9.</span> <span class="toc-text"> MS15-077[KB3077657]</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ms16-032kb3124280"><span class="toc-number">1.4.1.2.10.</span> <span class="toc-text"> MS16-032[KB3124280]</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ms16-075"><span class="toc-number">1.4.1.2.11.</span> <span class="toc-text"> MS16-075</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cve-2019-0708"><span class="toc-number">1.4.1.2.12.</span> <span class="toc-text"> CVE-2019-0708</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cve-2019-1322cve-2019-1405"><span class="toc-number">1.4.1.2.13.</span> <span class="toc-text"> CVE-2019-1322&amp;CVE-2019-1405</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cve-2019-12750-%E8%B5%9B%E9%97%A8%E9%93%81%E5%85%8B%E7%94%A8%E5%BE%97%E8%BE%83%E5%A4%9A%E6%9C%AC%E5%9C%B0%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.2.14.</span> <span class="toc-text"> CVE-2019-12750 (赛门铁克（用得较多）本地提权)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x1-%E5%86%85%E6%A0%B8%E6%BA%A2%E5%87%BA%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.3.</span> <span class="toc-text"> 00x1-内核溢出提权：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x2-psexec%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.4.</span> <span class="toc-text"> 00x2-psexec提权：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x3-%E7%BB%95%E8%BF%87uac%E6%8F%90%E6%9D%83-cve-2019-1388"><span class="toc-number">1.4.1.5.</span> <span class="toc-text"> 00x3-绕过UAC提权、CVE-2019-1388</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x4-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.6.</span> <span class="toc-text"> 00x4-数据库提权：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#mysql%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.6.1.</span> <span class="toc-text"> MySQL数据库提权：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sql-server%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.6.2.</span> <span class="toc-text"> SQL Server数据库提权：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#oreace%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.6.3.</span> <span class="toc-text"> oreace数据库提权：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x5-dll%E5%8A%AB%E6%8C%81%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.7.</span> <span class="toc-text"> 00x5-DLL劫持提权：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x6-%E4%BB%A4%E7%89%8C%E7%AA%83%E5%8F%96"><span class="toc-number">1.4.1.8.</span> <span class="toc-text"> 00x6-令牌窃取：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x7-%E7%83%82%E5%9C%9F%E8%B1%86%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.9.</span> <span class="toc-text"> 00x7-烂土豆提权：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E8%88%AC%E6%B5%81%E7%A8%8B"><span class="toc-number">1.4.1.9.1.</span> <span class="toc-text"> 一般流程：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x8-%E5%8F%AF%E4%BF%A1%E4%BB%BB%E6%9C%8D%E5%8A%A1%E8%B7%AF%E5%BE%84%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.4.1.10.</span> <span class="toc-text"> 00x8-可信任服务路径漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.1.10.1.</span> <span class="toc-text"> 漏洞原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%94%BB%E5%87%BB%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.1.10.2.</span> <span class="toc-text"> 攻击方法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x9-%E4%B8%8D%E5%AE%89%E5%85%A8%E6%9C%8D%E5%8A%A1%E6%9D%83%E9%99%90%E9%85%8D%E5%90%88%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1schtasks%E6%88%96sc%E5%91%BD%E4%BB%A4%E5%88%A9%E7%94%A8"><span class="toc-number">1.4.1.11.</span> <span class="toc-text"> 00x9-不安全服务权限配合计划任务schtasks或SC命令利用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86-2"><span class="toc-number">1.4.1.11.1.</span> <span class="toc-text"> 漏洞原理</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x10-unattended-installs%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85"><span class="toc-number">1.4.1.12.</span> <span class="toc-text"> 00x10-Unattended Installs（自动安装）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86-3"><span class="toc-number">1.4.1.12.1.</span> <span class="toc-text"> 漏洞原理：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x11-alwaysinstallelevated"><span class="toc-number">1.4.1.13.</span> <span class="toc-text"> 00x11-AlwaysInstallElevated</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%BC%8F%E6%B4%9E%E5%8E%9F%E7%90%86-4"><span class="toc-number">1.4.1.13.1.</span> <span class="toc-text"> 漏洞原理：</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x12-%E7%AD%96%E7%95%A5%E7%BB%84%E9%A6%96%E9%80%89%E9%A1%B9%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.14.</span> <span class="toc-text"> 00x12-策略组首选项提权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x13-%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.1.15.</span> <span class="toc-text"> 00x13-计划任务提权</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#at%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.1.15.1.</span> <span class="toc-text"> at命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sc%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.1.15.2.</span> <span class="toc-text"> sc命令</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99-%E5%B7%A5%E5%85%B7"><span class="toc-number">1.4.2.</span> <span class="toc-text"> 相关资料、工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux-2"><span class="toc-number">1.4.3.</span> <span class="toc-text"> Linux</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%88%E8%BF%9B%E8%A1%8C%E5%BF%85%E8%A6%81%E7%9A%84%E6%A3%80%E6%9F%A5"><span class="toc-number">1.4.3.1.</span> <span class="toc-text"> 先进行必要的检查</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%BC%8F%E6%B4%9E"><span class="toc-number">1.4.3.2.</span> <span class="toc-text"> 常用漏洞</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#cve-2016-5195"><span class="toc-number">1.4.3.2.1.</span> <span class="toc-text"> CVE-2016-5195</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cve-2017-16995"><span class="toc-number">1.4.3.2.2.</span> <span class="toc-text"> CVE-2017-16995</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cve-2019-13272"><span class="toc-number">1.4.3.2.3.</span> <span class="toc-text"> CVE-2019-13272</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#docker%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.3.2.4.</span> <span class="toc-text"> docker提权</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x1-%E5%86%85%E6%A0%B8%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.3.3.</span> <span class="toc-text"> 00x1-内核提权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x2-suid%E9%85%8D%E7%BD%AE%E9%94%99%E8%AF%AF%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.3.4.</span> <span class="toc-text"> 00x2-SUID配置错误提权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x3-%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.3.5.</span> <span class="toc-text"> 00x3-计划任务提权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x4-sudo%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.3.6.</span> <span class="toc-text"> 00x4-sudo提权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x5-%E6%98%8E%E6%96%87root%E5%AF%86%E7%A0%81%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.3.7.</span> <span class="toc-text"> 00x5-明文root密码提权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x6-%E5%AF%86%E7%A0%81%E5%A4%8D%E7%94%A8%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.3.8.</span> <span class="toc-text"> 00x6-密码复用提权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x7-%E7%AC%AC%E4%B8%89%E6%96%B9%E6%9C%8D%E5%8A%A1%E6%8F%90%E6%9D%83-%E9%99%90%E4%BA%8E%E6%9C%89root%E6%9D%83%E9%99%90"><span class="toc-number">1.4.3.9.</span> <span class="toc-text"> 00x7-第三方服务提权、限于有root权限</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-nfs%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.3.9.1.</span> <span class="toc-text"> 1、NFS提权</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%8F%90%E6%9D%83"><span class="toc-number">1.4.3.9.2.</span> <span class="toc-text"> 2、数据库提权</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x8-%E9%80%9A%E9%85%8D%E7%AC%A6%E6%B3%A8%E5%85%A5"><span class="toc-number">1.4.3.10.</span> <span class="toc-text"> 00x8-通配符注入</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#00x5-%E5%85%8D%E6%9D%80"><span class="toc-number">1.5.</span> <span class="toc-text"> 00x5-免杀</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%85%8D%E6%9D%80%E8%BD%AF%E4%BB%B6"><span class="toc-number">1.5.1.</span> <span class="toc-text"> 常用免杀软件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%8D%E6%9D%80%E5%AD%A6%E4%B9%A0%E5%9C%B0%E5%9D%80"><span class="toc-number">1.5.2.</span> <span class="toc-text"> 免杀学习地址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#00x6-%E5%86%85%E7%BD%91%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86"><span class="toc-number">1.6.</span> <span class="toc-text"> 00x6-内网信息搜集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%8C%85%E6%8B%AC%E7%9A%84%E6%96%B9%E9%9D%A2"><span class="toc-number">1.6.1.</span> <span class="toc-text"> 主要包括的方面</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#0x01-%E6%90%9C%E9%9B%86%E5%BD%93%E5%89%8D%E5%B7%B2%E6%8E%A7%E8%B7%B3%E6%9D%BF%E6%9C%BA%E7%9A%84%E5%90%84%E7%B1%BB%E6%95%8F%E6%84%9F%E4%BF%A1%E6%81%AF"><span class="toc-number">1.6.1.1.</span> <span class="toc-text"> 0x01-搜集当前已控“跳板机”的各类敏感信息：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x02-%E6%90%9C%E9%9B%86%E5%BD%93%E5%89%8D%E5%B7%B2%E6%8E%A7%E8%B7%B3%E6%9D%BF%E6%9C%BA%E7%9A%84%E5%86%85%E7%BD%91%E4%BF%A1%E6%81%AF"><span class="toc-number">1.6.1.2.</span> <span class="toc-text"> 0x02-搜集当前已控“跳板机”的内网信息</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E6%96%B9%E9%9D%A2"><span class="toc-number">1.6.1.2.1.</span> <span class="toc-text"> 主要方面</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0x03-%E4%B8%BB%E5%8A%A8%E5%AF%86%E7%A0%81%E6%90%9C%E9%9B%86"><span class="toc-number">1.6.1.3.</span> <span class="toc-text"> 0x03-主动密码搜集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#00x4-%E8%A2%AB%E5%8A%A8%E5%AF%86%E7%A0%81%E6%90%9C%E9%9B%86"><span class="toc-number">1.6.1.4.</span> <span class="toc-text"> 00x4-被动密码搜集</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E6%A8%AA%E5%90%91%E7%A7%BB%E5%8A%A8"><span class="toc-number">1.6.2.</span> <span class="toc-text"> 内网横向移动</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#00x7-%E5%86%85%E7%BD%91%E8%BD%AC%E5%8F%91"><span class="toc-number">1.7.</span> <span class="toc-text"> 00x7-内网转发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E5%B8%B8%E7%94%A8%E9%9A%A7%E9%81%93%E8%BD%AC%E5%8F%91%E4%BB%A3%E7%90%86%E7%A9%BF%E9%80%8F%E6%89%8B%E6%B3%95%E6%8F%90%E7%82%BC%E6%B1%87%E6%80%BB"><span class="toc-number">1.7.1.</span> <span class="toc-text"> 内网常用“隧道&quot;&#x2F;“转发”&#x2F;&quot;代理&quot;穿透手法提炼汇总</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E5%87%BA%E7%BD%91%E6%8E%A2%E6%B5%8B"><span class="toc-number">1.7.1.1.</span> <span class="toc-text"> 内网出网探测：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%91%E8%BD%AC%E5%8F%91"><span class="toc-number">1.7.2.</span> <span class="toc-text"> 内网转发</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99-2"><span class="toc-number">1.7.2.1.</span> <span class="toc-text"> 相关资料</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E5%B7%A5%E5%85%B7"><span class="toc-number">1.7.2.2.</span> <span class="toc-text"> 相关工具</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#00x8-dc%E6%8F%90%E6%9D%83"><span class="toc-number">1.8.</span> <span class="toc-text"> 00x8-DC提权</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#00x9-%E6%9D%83%E9%99%90%E7%BB%B4%E6%8C%81"><span class="toc-number">1.9.</span> <span class="toc-text"> 00x9-权限维持</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#windows-3"><span class="toc-number">1.9.1.</span> <span class="toc-text"> windows</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99-3"><span class="toc-number">1.9.1.1.</span> <span class="toc-text"> 相关资料</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#linux-3"><span class="toc-number">1.9.2.</span> <span class="toc-text"> Linux</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99-4"><span class="toc-number">1.9.2.1.</span> <span class="toc-text"> 相关资料</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">1.10.</span> <span class="toc-text"> 参考</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/04/07/145585172.html" title="DingDing视频下载"><img src="https://s2.loli.net/2022/04/08/3sgAHoqV2mdCzU1.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DingDing视频下载"/></a><div class="content"><a class="title" href="/2023/04/07/145585172.html" title="DingDing视频下载">DingDing视频下载</a><time datetime="2023-04-07T00:15:20.000Z" title="发表于 2023-04-07 08:15:20">2023-04-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/24/120606809.html" title="Vue3学习"><img src="https://s2.loli.net/2022/04/08/RLAX9PN5ZmHuzgb.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue3学习"/></a><div class="content"><a class="title" href="/2023/03/24/120606809.html" title="Vue3学习">Vue3学习</a><time datetime="2023-03-24T00:41:14.000Z" title="发表于 2023-03-24 08:41:14">2023-03-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/16/791080604.html" title="MSF使用教程"><img src="https://s2.loli.net/2022/04/08/RLAX9PN5ZmHuzgb.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="MSF使用教程"/></a><div class="content"><a class="title" href="/2023/03/16/791080604.html" title="MSF使用教程">MSF使用教程</a><time datetime="2023-03-16T07:12:11.000Z" title="发表于 2023-03-16 15:12:11">2023-03-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/16/1905692189.html" title="2022长安杯"><img src="https://s2.loli.net/2022/04/08/yArF9MhpxCblkRJ.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2022长安杯"/></a><div class="content"><a class="title" href="/2023/03/16/1905692189.html" title="2022长安杯">2022长安杯</a><time datetime="2023-03-16T07:08:15.000Z" title="发表于 2023-03-16 15:08:15">2023-03-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/03/16/4185480926.html" title="Windows的c盘清理问题"><img src="https://s2.loli.net/2022/04/08/yArF9MhpxCblkRJ.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Windows的c盘清理问题"/></a><div class="content"><a class="title" href="/2023/03/16/4185480926.html" title="Windows的c盘清理问题">Windows的c盘清理问题</a><time datetime="2023-03-16T03:46:36.000Z" title="发表于 2023-03-16 11:46:36">2023-03-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://s2.loli.net/2022/04/08/3sgAHoqV2mdCzU1.png')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By like4h</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">like4h's blog</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body></html>